{
    "doc_number": "2023523638",
    "top_k": 4,
    "application_structure": {
        "problem": "ビデオデータのコーディングにおいて、現在のビデオブロックへの転換中に、変換情報（二次変換に関する情報）を符号化すべきか否かを効率的に決定し、ビットストリームのサイズと処理負荷を最適化すること。",
        "solution_principle": "現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素（ビットストリームに含まれる情報）を構文解析するかどうかを決定することにより、二次変換の適用を制御する。",
        "claim1_requirements": [
            "ビデオデータをコーディングする方法であること。",
            "ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
            "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。"
        ],
        "claim2_limitations": [
            "前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと。",
            "当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと。"
        ],
        "claim3_limitations": [
            "前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと。"
        ],
        "claim4_limitations": [
            "前記変換情報は、分離不能な二次変換を示すこと。"
        ],
        "claim5_limitations": [
            "前記変換情報は、低周波分離不能変換を示すこと。"
        ],
        "claim6_limitations": [
            "前記構文要素が前記ビットストリームに含まれないときに、前記転換は、前記二次変換を使用しないで前記転換を実行することを含むこと。"
        ],
        "claim7_limitations": [
            "前記決定を実行することは、前記位置及び／又は第２の条件を満足しない少なくとも１つの他のコーディングの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含むこと。"
        ],
        "claim8_limitations": [
            "前記決定を実行することは、前記現在のビデオブロックのために使用されるコーディングモードが特定のタイプでないことの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含むこと。"
        ],
        "claim9_limitations": [
            "前記位置は、座標（ＬａｓｔＸ，ＬａｓｔＹ）によって表されること。",
            "前記構文要素は、ＬａｓｔＸ≦Ｔｈ０及びＬａｓｔＹ≦Ｔｈ１であることの故に、前記ビットストリームに含まれることからスキップされること。",
            "ここで、Ｔｈ１及びＴｈ２は、数字であること。"
        ],
        "claim10_limitations": [
            "Ｔｈ１及びＴｈ２は予め定義され、前記ビットストリームにおいて信号化されないこと。"
        ],
        "claim11_limitations": [
            "Ｔｈ１及びＴｈ２は等しいこと。"
        ],
        "claim12_limitations": [
            "Ｔｈ１＝Ｔｈ２＝０であること。"
        ],
        "claim13_limitations": [
            "前記現在のビデオブロックの前記最後の非ゼロ係数の前記位置は、前記現在のビデオブロックの係数の順走査順序にあること。"
        ],
        "claim14_limitations": [
            "前記変換は、順変換または逆変換のうちの少なくとも１つを含むこと。"
        ],
        "claim15_limitations": [
            "前記決定に従って前記ビットストリームから前記現在のビデオブロックを復号化することによって前記転換を実行することを更に含むこと。"
        ],
        "claim16_limitations": [
            "前記決定に従って前記現在のビデオブロックを前記ビットストリームに符号化することによって前記転換を実行することを更に含むこと。"
        ],
        "claim17_requirements": [
            "ビデオデータをコーディングするための装置であること。",
            "プロセッサと、命令をその上に有する非一時的なメモリとを含むこと。",
            "前記命令は、前記プロセッサによって実行されると、前記プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
            "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させること。"
        ],
        "claim18_requirements": [
            "命令を格納する非一時的なコンピュータ読取可能な記憶媒体であること。",
            "前記命令は、プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
            "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させること。"
        ],
        "claim19_requirements": [
            "ビデオ処理装置によって実行される方法によって生成されるビットストリームを格納する非一時的なコンピュータ読取可能な記録媒体であること。",
            "前記方法は、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
            "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行することを含むこと。"
        ]
    },
    "prior_art_structure": {
        "problem": "映像のブロックとビットストリームとの間の変換（映像符号化、復号、トランスコーディング）における、構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択方法の最適化",
        "solution_principle": "現在のブロックが水平または垂直に分割されるか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択を、許可された垂直分割の数（許可されたバイナリ垂直分割の数および許可されたターナリ垂直分割の数を含む）と、許可された水平分割の数（許可されたバイナリ水平分割の数および許可されたターナリ水平分割の数を含む）に基づいて行うこと。",
        "claim1_requirements": [
            "規則に従って、映像の現在のブロックと、映像のビットストリームとの間の変換を実行する。",
            "前記規則は、前記現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定する。",
            "前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含む。",
            "前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含む。"
        ],
        "claim2_limitations": [
            "前記ブロックは、コーディングユニットである、こと。"
        ],
        "claim3_limitations": [
            "前記コンテキスト増加手段は、前記許可された垂直分割の数と、前記許可された水平分割とを比較することにより選択される、こと。"
        ],
        "claim4_limitations": [
            "前記コンテキスト増加手段は、前記許可された垂直分割の数が前記許可された水平分割の数よりも大きい場合は第１のコンテキスト増加手段のセット、前記許可された垂直分割の数よりも前記許可された水平分割の数よりも小さい場合は第２のコンテキスト増加手段のセット、および、前記許可された垂直分割の数が前記許可された水平分割の数に等しい場合は第３のコンテキスト増加手段のセットから選択される、こと。"
        ],
        "claim5_limitations": [
            "前記第１のコンテキスト増加手段のセットおよび前記第２のコンテキスト増加手段のセットのそれぞれは、単一のコンテキスト増加手段を含む。",
            "前記第３のコンテキスト増加手段のセットは、複数のコンテキスト増加手段を含む。",
            "前記第１のコンテキスト増加手段のセット、前記第２のコンテキスト増加手段のセット、および、前記第３のコンテキスト増加手段のセットにおけるコンテキスト増加手段は、それぞれ異なる、こと。"
        ],
        "claim6_limitations": [
            "前記第１のコンテキスト増加手段のセットにおける前記単一のコンテキスト増加手段は、４の値を有する。",
            "前記第２のコンテキスト増加手段のセットにおける前記単一のコンテキスト増加手段は、３の値を有する。",
            "前記第３のコンテキスト増加手段のセットは、０の値を有する第３のコンテキスト増加手段、１の値を有する第４のコンテキスト増加手段、および、２の値を有する第５のコンテキスト増加手段を含む、こと。"
        ],
        "claim7_limitations": [
            "前記第３のコンテキスト増加手段のセットからの前記コンテキスト増加手段の前記選択は更に、（１）前記現在のブロックの上に位置する第１の近傍のブロック、および、前記現在のブロックの左に位置する第２の近傍のブロックの利用可能性、（２）前記現在のブロックの寸法、および／または、（３）前記第１の近傍のブロックの寸法および／または前記第２の近傍のブロックの寸法に基づく、こと。"
        ],
        "claim8_limitations": [
            "前記コンテキスト増加手段は、以下の少なくとも１つを満たす場合の第３のコンテキスト増加手段の値に割り当てられる：（１）前記現在のブロックの上に位置する前記第１の近傍のブロックが利用可能である、（２）前記現在のブロックの左に位置する前記第２の近傍のブロックが利用可能である、（３）ｄＡがｄＬに等しい、ｄＡは、前記第１の近傍のブロックが利用可能である場合に前記第１の近傍のブロックの幅によって除された前記現在のブロックの幅を示し、かつ、前記第１の近傍のブロックが利用可能でない場合に前記現在のブロックの幅を示す、ｄＬは、前記第２の近傍のブロックが利用可能である場合に前記第２の近傍のブロックの高さによって除された前記現在のブロックの高さを示し、かつ、前記第１の近傍のブロックが利用可能でない場合に前記現在のブロックの高さを示す、こと。"
        ],
        "claim9_limitations": [
            "前記コンテキスト増加手段は、条件（ａ）が満たされず、かつ、条件（ｂ）が満たされる場合、第４のコンテキスト増加手段の値に割り当てられる。",
            "前記条件（ａ）は、以下の少なくとも１つを満たすことを含む：（１）前記現在のブロックの上に位置する前記第１の近傍のブロックが利用可能でない、（２）前記現在のブロックの左に位置する前記第２の近傍のブロックが利用可能でない、（３）ｄＡがｄＬに等しい、ｄＡは、前記第１の近傍のブロックが利用可能である場合は前記第１の近傍のブロックの幅によって除された前記現在のブロックの幅を示し、かつ、前記第１の近傍のブロックが利用可能でない場合は前記現在のブロックの幅を示し、ｄＬは、前記第２の近傍のブロックが利用可能である場合は前記第２の近傍のブロックの高さによって除された前記現在のブロックの高さを示し、かつ、前記第２の近傍のブロックが利用可能でない場合は前記現在のブロックの高さを示し。",
            "前記条件（ｂ）は、ｄＡがｄＬよりも小さいことを含む、こと。"
        ],
        "claim10_limitations": [
            "前記コンテキスト増加手段は、条件（ａ）および条件（ｂ）がすべて満たされない場合、第５のコンテキスト増加手段の値が割り当てられる。",
            "前記条件（ａ）は、以下の少なくとも１つを満たすことを含み、（１）前記現在のブロックの上に位置する前記第１の近傍のブロックが利用可能でない、（２）前記現在のブロックの左に位置する前記第２の近傍のブロックが利用可能でない、（３）ｄＡがｄＬに等しい、ｄＡは、前記第１の近傍のブロックが利用可能である場合は前記第１の近傍のブロックの幅によって除された前記現在のブロックの幅を示し、かつ、前記第１の近傍のブロックが利用可能でない場合は前記現在のブロックの幅を示し、ｄＬは、前記第２の近傍のブロックが利用可能である場合は前記第２の近傍のブロックの高さによって除された前記現在のブロックの高さを示し、かつ、前記第２の近傍のブロックが利用可能でない場合は前記現在のブロックの高さを示し。",
            "前記条件（ｂ）は、ｄＡがｄＬよりも小さいことを含む、こと。"
        ],
        "claim11_limitations": [
            "前記変換は、前記映像を前記ビットストリームに符号化することを含む、こと。"
        ],
        "claim12_limitations": [
            "前記変換は、前記映像を前記ビットストリームから復号することを含む、こと。"
        ],
        "claim13_requirements": [
            "プロセッサと、命令を有する非一時的メモリを有する、映像データを処理するための装置。",
            "前記命令が前記プロセッサによって実行された際に、前記プロセッサに、規則に従って、映像の現在のブロックと、前記映像のビットストリームとの間の変換を実行させる。",
            "前記規則は、前記現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定する。",
            "前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含む。",
            "前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含む。"
        ],
        "claim14_requirements": [
            "プロセッサに、規則に従って、映像の現在のブロックと、前記映像のビットストリームとの間の変換を実行させる。",
            "前記規則は、前記現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定する。",
            "前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含む。",
            "前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含む。",
            "命令を格納する非一時的コンピュータ可読記憶媒体。"
        ],
        "claim15_requirements": [
            "映像処理装置によって実行される方法によって生成される映像のビットストリームを格納する非一時的コンピュータ可読記録媒体。",
            "前記方法は、規則に従って、前記映像の前記ビットストリームを生成すること、を有する。",
            "前記規則は、現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定する。",
            "前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含み、",
            "前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含む。"
        ]
    },
    "applicant_arguments": "承知いたしました。特許庁の熟練した特許審査官アシスタントとして、本願発明の代理人の立場で、構造化された文献データに基づき、進歩性に関する論理的な主張を構築します。\n\n---\n\n## 第一の主張：Claim 1の進歩性\n\n### 1. 課題・解決原理の相違点\n\n本願発明は、「ビデオデータのコーディングにおいて、現在のビデオブロックへの転換中に、変換情報（二次変換に関する情報）を符号化すべきか否かを効率的に決定し、ビットストリームのサイズと処理負荷を最適化すること」を課題とし、その解決手段として、「現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素を構文解析するかどうかを決定することにより、二次変換の適用を制御する」ことを解決原理としています。\n\n一方、先行技術は、「映像のブロックとビットストリームとの間の変換における、構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択方法の最適化」を課題とし、その解決手段として、「現在のブロックが水平または垂直に分割されるか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択を、許可された垂直分割の数および許可された水平分割の数に基づいて行う」ことを解決原理としています。\n\nこのように、本願発明は二次変換の適用可否判断に焦点を当て、その判断基準として「最後の非ゼロ係数の位置」を利用するのに対し、先行技術はブロック分割の構文要素のコーディングにおけるコンテキスト増加手段の選択に焦点を当て、その判断基準として「許可される分割数」を利用するものであり、課題および解決原理において根本的な相違があります。\n\n### 2. 構成要件の相違点\n\n本願発明のClaim 1は、以下の要件を含みます。\n\n*   (a) ビデオデータをコーディングする方法であること。\n*   (b) ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。\n*   (c) 前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。\n\n一方、先行技術のClaim 1は、以下の要件を含みます。\n\n*   (A) 映像の現在のブロックと、映像のビットストリームとの間の変換を実行すること。\n*   (B) 前記規則は、前記現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定すること。\n*   (C) 前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含むこと。\n*   (D) 前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含むこと。\n\n比較すると、本願発明のClaim 1の構成要件(b)および(c)に記載された、「現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かの決定を実行する」という点は、先行技術の構成要件(B)～(D)には全く開示されていません。先行技術は、ブロック分割の構文要素のコーディングにおけるコンテキスト増加手段の選択に関するものであり、二次変換の適用可否判断や、その判断基準として「最後の非ゼロ係数の位置」を利用する点において、本願発明のClaim 1とは明確に区別されます。\n\n### 3. 進歩性の根拠\n\n本願発明のClaim 1は、上記構成要件の相違点から、先行技術文献からは容易に想到できない進歩性を有します。\n\n具体的には、先行技術はブロック分割の決定に関わる構文要素のコーディング最適化に主眼を置いており、その判断基準は「許可される分割数」という、ブロック全体の状態や分割の可能性に基づくものです。これに対し、本願発明は、ブロック内の係数情報、とりわけ「最後の非ゼロ係数の位置」という、より詳細かつ局所的な情報に着目し、二次変換といった、より高度な変換処理の適用可否を判断するという、全く異なる課題解決アプローチを採用しています。\n\n映像コーディングにおいて、二次変換の適用は、ビットストリームサイズと処理負荷に大きな影響を与える重要な決定事項です。この適用可否を、ブロック内の係数分布（特に非ゼロ係数の終端位置）という直感的に理解しやすい情報に基づいて判断する手法は、先行技術のブロック分割のコンテキスト選択という技術分野からは、容易に類推・導出できるものではありません。\n\n「最後の非ゼロ係数の位置」という情報は、係数エネルギーの分布傾向を示唆するものであり、これを二次変換の適用可否判断に結びつける発想は、二次変換の適用により符号化効率が向上する可能性のあるブロックと、そうでないブロックを効率的に見分けるための、当業者の予測を超えた工夫であると考えられます。したがって、本願発明のClaim 1は、先行技術の開示内容から容易に想到できるものではなく、進歩性を有すると主張します。\n\n---\n\n## 予備的主張：Claim 2以降の進歩性\n\n本願発明のClaim 1の進歩性が仮に否定されたとしても、Claim 2以降の追加限定により、先行技術からは容易に想到できない進歩性を主張できると考えます。\n\n### Claim 2の追加限定について\n\nClaim 2は、「前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと。」および「当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと。」という限定を追加しています。\n\n先行技術は、コンテキスト増加手段の選択基準として「許可された分割数」を用いており、これはブロックの分割可能性に関する情報です。本願発明のClaim 2は、これに加えて「第１の条件を満足する少なくとも１つのコーディング基準」という、より具体的な適用判断基準を導入し、さらに、その決定に基づいて「変換情報を使用して転換を実行する」という、実際のアクションまで規定しています。\n\n先行技術からは、二次変換の適用判断や、その判断基準として「最後の非ゼロ係数の位置」と「第１の条件」を組み合わせるという具体的な動機付けは全く見出せません。先行技術の課題はコンテキスト増加手段の選択であり、二次変換の適用制御とは異なるため、Claim 2の追加限定は、先行技術から容易に想到できるものではないと主張します。\n\n### Claim 3の追加限定について\n\nClaim 3は、「前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと。」という限定を追加しています。\n\nこれは、Claim 2で述べた「変換情報を使用して転換を実行する」というステップを、具体的に「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な手法に限定するものです。\n\n先行技術は、ブロック分割の構文要素のコーディングに関するものであり、係数の脱量子化や残差係数への二次変換の適用といった、係数レベルでの具体的な処理については一切言及がありません。したがって、先行技術を参照して、本願発明のClaim 3における「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な処理を想到することは、当業者にとって容易ではないと考えられます。\n\n---",
    "examiner_review": "承知いたしました。特許庁の審査官として、代理人の主張を踏まえ、Claim 1の進歩性について客観的かつ厳格に審査します。\n\n---\n\n### 【第1段階：Claim 1 (幹) の検証】\n\n#### 1. 技術分野の関連性と動機付け（最重要）:\n\n*   **本願発明(A)と先行技術(B)の技術分野:**\n    *   本願発明(A)は、ビデオデータのコーディングにおける二次変換の適用制御に関するものです。\n    *   先行技術(B)は、映像のブロックとビットストリームとの間の変換（符号化、復号、トランスコーディング）における、構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択方法の最適化に関するものです。\n    *   両者は共に「映像（ビデオ）のブロック/ビデオブロック」と「ビットストリーム」との間の「変換」に関わる技術であり、映像符号化（コーディング）という**共通の技術分野**に属すると判断されます。\n\n*   **当業者が、Aの技術課題を解決するために、Bの技術を適用または改良しようとする動機付け（理由）:**\n    *   本願発明(A)の課題は、「二次変換に関する情報を符号化すべきか否かを効率的に決定し、ビットストリームのサイズと処理負荷を最適化すること」です。\n    *   先行技術(B)の課題は、「構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択方法の最適化」であり、これはブロックの分割方法の選択に関わるもので、結果として符号化効率の向上に寄与するものです。\n    *   両者ともに、映像符号化における効率化（ビットストリームサイズ、処理負荷の最適化）を目指すという共通の目的を有しています。\n    *   先行技術(B)は、ブロックの分割に関する構文要素のコーディングを最適化する手法を開示しています。本願発明(A)は、二次変換の適用可否を決定するという、別の最適化手法を提案しています。\n    *   当業者は、映像符号化の効率をさらに向上させるために、ブロックの分割方法の選択（先行技術(B)）とは別に、二次変換の適用を制御する（本願発明(A)の課題）という、**異なる観点からの最適化手法**を検討することは考えられます。\n    *   しかしながら、先行技術(B)の解決原理は「許可された垂直分割の数」と「許可された水平分割の数」に基づいて「コンテキスト増加手段（ctxInc）」を選択することにあります。これは、ブロックの分割様式を決定するための符号化パラメータの選択に関わるものであり、本願発明(A)の「最後の非ゼロ係数の位置」に基づいて「二次変換の適用」を決定するという、**全く異なる情報（係数の位置）**を用い、**全く異なる判断（二次変換の適用有無）**を行う解決策とは、直接的な関連性が薄いです。\n    *   先行技術(B)を読んだ当業者が、その技術課題（ctxInc選択の最適化）とは別の課題（二次変換の適用制御）を認識し、かつ、その解決策として「最後の非ゼロ係数の位置」という情報を利用することを、Bの開示内容から**直接的かつ合理的に導き出すことは困難**であると考えられます。Bは係数の位置情報には全く言及しておらず、二次変換の適用についても触れていません。\n    *   したがって、現時点では、**「Bの技術を適用または改良しようとする直接的な動機付けは乏しい」**と判断します。\n\n*   **（重要：もし分野が無関係で動機付けが存在しない場合、直ちに「進歩性あり（容易想到ではない）」と結論付け、以降の比較は不要です。）**\n    *   上記検討の結果、技術分野は関連するものの、課題解決の観点からは**直接的な動機付けは乏しい**と判断します。よって、現段階で**Claim 1は「進歩性あり（容易想到ではない）」と結論付けます。**\n\n---\n\n**（審査官としての判断）**\n\nClaim 1は、先行技術(B)の開示内容からは、その技術課題（ctxInc選択の最適化）とは異なる課題（二次変換の適用可否判断）を設定しており、かつ、その解決手段として「最後の非ゼロ係数の位置」という、先行技術(B)には全く記載のない情報を利用する点が新規であり、また、先行技術(B)のブロック分割のコンテキスト選択という技術から、二次変換の適用制御という技術へ移行し、その判断基準として係数の位置情報を用いることへの**直接的な動機付けを見出すことが困難**であるため、当業者が容易に想到できるものではないと判断します。\n\nしたがって、**Claim 1は進歩性を有します（容易想到ではない）。**\n\n---\n**（補足：代理人の主張に対するコメント）**\n\n代理人主張の「課題・解決原理の相違点」および「構成要件の相違点」の指摘は、本審査官の判断と概ね合致しており、特に「最後の非ゼロ係数の位置」という判断基準の独自性、および先行技術との課題設定の相違点を的確に捉えていると考えられます。\n\n---\n\n（次の指示をお待ちしております。）",
    "final_decision": "承知いたしました。主任審査官として、代理人の主張と審査官の検証結果を比較検討し、最終的な進歩性の判断を行います。\n\n---\n\n## 主任審査官による最終判断\n\n### 1. Claim 1 (幹) の進歩性\n\n**判断:** 容易想到ではない\n**理由:**\n本願発明のClaim 1は、先行技術(B)とは異なる課題（二次変換の適用制御）を設定し、その解決のために「最後の非ゼロ係数の位置」という、先行技術(B)には開示のない情報を利用する。先行技術(B)のブロック分割のコンテキスト選択という技術から、二次変換の適用制御へ移行し、その判断基準として係数の位置情報を用いることへの直接的な動機付けは乏しく、当業者が容易に想到できるものではないため。\n\n### 2. Claim 2 (枝1) の進歩性\n\n**判断:** 容易想到ではない\n**理由:**\nClaim 2は、Claim 1の判断に加え、「第１の条件を満足する少なくとも１つのコーディング基準」という判断基準の追加、および「変換情報を使用して転換を実行する」という具体的な処理を規定する。先行技術(B)はブロック分割のコンテキスト選択に関するものであり、二次変換の適用判断や、その判断基準として「最後の非ゼロ係数の位置」と「第１の条件」を組み合わせること、さらに実行することへの動機付けは先行技術(B)からは見出せない。\n\n### 3. Claim 3 (枝2) の進歩性\n\n**判断:** 容易想到ではない\n**理由:**\nClaim 3は、Claim 2の「転換を実行する」ステップを、「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な処理に限定する。先行技術(B)は、係数の脱量子化や残差係数への二次変換の適用といった係数レベルの処理には全く言及がなく、この具体的な処理を想到することは容易ではない。\n\n### 4. 総合結論\n\nClaim 1は、先行技術(B)との技術分野の関連性は認められるものの、設定された課題、採用された解決原理、および構成要件（特に判断基準となる情報）において相違があり、先行技術(B)から直接的かつ合理的に導き出すことが困難であるため、進歩性を有する（容易想到ではない）。\nさらに、Claim 2およびClaim 3の追加限定は、先行技術(B)からは何ら示唆や動機付けがなく、当業者が容易に想到できる範囲を超えるものである。\nよって、Claim 1, 2, 3はいずれも進歩性を有し、特許可能であると判断する。\n\n---\n\n## JSON形式出力\n\n```json\n{\n  \"claim1\": {\n    \"inventive\": true,\n    \"reason\": \"本願発明のClaim 1は、先行技術(B)とは異なる課題（二次変換の適用制御）を設定し、その解決のために「最後の非ゼロ係数の位置」という、先行技術(B)には開示のない情報を利用する。先行技術(B)のブロック分割のコンテキスト選択という技術から、二次変換の適用制御へ移行し、その判断基準として係数の位置情報を用いることへの直接的な動機付けは乏しく、当業者が容易に想到できるものではないため。\"\n  },\n  \"claim2\": {\n    \"inventive\": true,\n    \"reason\": \"Claim 2は、Claim 1の判断に加え、「第１の条件を満足する少なくとも１つのコーディング基準」という判断基準の追加、および「変換情報を使用して転換を実行する」という具体的な処理を規定する。先行技術(B)はブロック分割のコンテキスト選択に関するものであり、二次変換の適用判断や、その判断基準として「最後の非ゼロ係数の位置」と「第１の条件」を組み合わせること、さらに実行することへの動機付けは先行技術(B)からは見出せないため。\"\n  },\n  \"claim3\": {\n    \"inventive\": true,\n    \"reason\": \"Claim 3は、Claim 2の「転換を実行する」ステップを、「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な処理に限定する。先行技術(B)は、係数の脱量子化や残差係数への二次変換の適用といった係数レベルの処理には全く言及がなく、この具体的な処理を想到することは容易ではないため。\"\n  },\n  \"conclusion\": \"Claim 1, 2, 3はいずれも、先行技術(B)との比較において、課題設定、解決手段、および構成要件の点で相違があり、当業者が容易に想到できるものではないため、進歩性を有する。よって、Claim 1, 2, 3はいずれも特許可能であると判断する。\"\n}\n```",
    "conversation_history": [
        {
            "step": "0.1 Claim",
            "role": "構造化",
            "content": {
                "problem": "ビデオデータのコーディングにおいて、現在のビデオブロックへの転換中に、変換情報（二次変換に関する情報）を符号化すべきか否かを効率的に決定し、ビットストリームのサイズと処理負荷を最適化すること。",
                "solution_principle": "現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素（ビットストリームに含まれる情報）を構文解析するかどうかを決定することにより、二次変換の適用を制御する。",
                "claim1_requirements": [
                    "ビデオデータをコーディングする方法であること。",
                    "ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
                    "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。"
                ],
                "claim2_limitations": [
                    "前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと。",
                    "当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと。"
                ],
                "claim3_limitations": [
                    "前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと。"
                ],
                "claim4_limitations": [
                    "前記変換情報は、分離不能な二次変換を示すこと。"
                ],
                "claim5_limitations": [
                    "前記変換情報は、低周波分離不能変換を示すこと。"
                ],
                "claim6_limitations": [
                    "前記構文要素が前記ビットストリームに含まれないときに、前記転換は、前記二次変換を使用しないで前記転換を実行することを含むこと。"
                ],
                "claim7_limitations": [
                    "前記決定を実行することは、前記位置及び／又は第２の条件を満足しない少なくとも１つの他のコーディングの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含むこと。"
                ],
                "claim8_limitations": [
                    "前記決定を実行することは、前記現在のビデオブロックのために使用されるコーディングモードが特定のタイプでないことの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含むこと。"
                ],
                "claim9_limitations": [
                    "前記位置は、座標（ＬａｓｔＸ，ＬａｓｔＹ）によって表されること。",
                    "前記構文要素は、ＬａｓｔＸ≦Ｔｈ０及びＬａｓｔＹ≦Ｔｈ１であることの故に、前記ビットストリームに含まれることからスキップされること。",
                    "ここで、Ｔｈ１及びＴｈ２は、数字であること。"
                ],
                "claim10_limitations": [
                    "Ｔｈ１及びＴｈ２は予め定義され、前記ビットストリームにおいて信号化されないこと。"
                ],
                "claim11_limitations": [
                    "Ｔｈ１及びＴｈ２は等しいこと。"
                ],
                "claim12_limitations": [
                    "Ｔｈ１＝Ｔｈ２＝０であること。"
                ],
                "claim13_limitations": [
                    "前記現在のビデオブロックの前記最後の非ゼロ係数の前記位置は、前記現在のビデオブロックの係数の順走査順序にあること。"
                ],
                "claim14_limitations": [
                    "前記変換は、順変換または逆変換のうちの少なくとも１つを含むこと。"
                ],
                "claim15_limitations": [
                    "前記決定に従って前記ビットストリームから前記現在のビデオブロックを復号化することによって前記転換を実行することを更に含むこと。"
                ],
                "claim16_limitations": [
                    "前記決定に従って前記現在のビデオブロックを前記ビットストリームに符号化することによって前記転換を実行することを更に含むこと。"
                ],
                "claim17_requirements": [
                    "ビデオデータをコーディングするための装置であること。",
                    "プロセッサと、命令をその上に有する非一時的なメモリとを含むこと。",
                    "前記命令は、前記プロセッサによって実行されると、前記プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
                    "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させること。"
                ],
                "claim18_requirements": [
                    "命令を格納する非一時的なコンピュータ読取可能な記憶媒体であること。",
                    "前記命令は、プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
                    "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させること。"
                ],
                "claim19_requirements": [
                    "ビデオ処理装置によって実行される方法によって生成されるビットストリームを格納する非一時的なコンピュータ読取可能な記録媒体であること。",
                    "前記方法は、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
                    "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行することを含むこと。"
                ]
            }
        },
        {
            "step": "0.2 Candidate Prior Art",
            "role": "構造化",
            "content": {
                "problem": "映像のブロックとビットストリームとの間の変換（映像符号化、復号、トランスコーディング）における、構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択方法の最適化",
                "solution_principle": "現在のブロックが水平または垂直に分割されるか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択を、許可された垂直分割の数（許可されたバイナリ垂直分割の数および許可されたターナリ垂直分割の数を含む）と、許可された水平分割の数（許可されたバイナリ水平分割の数および許可されたターナリ水平分割の数を含む）に基づいて行うこと。",
                "claim1_requirements": [
                    "規則に従って、映像の現在のブロックと、映像のビットストリームとの間の変換を実行する。",
                    "前記規則は、前記現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定する。",
                    "前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含む。",
                    "前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含む。"
                ],
                "claim2_limitations": [
                    "前記ブロックは、コーディングユニットである、こと。"
                ],
                "claim3_limitations": [
                    "前記コンテキスト増加手段は、前記許可された垂直分割の数と、前記許可された水平分割とを比較することにより選択される、こと。"
                ],
                "claim4_limitations": [
                    "前記コンテキスト増加手段は、前記許可された垂直分割の数が前記許可された水平分割の数よりも大きい場合は第１のコンテキスト増加手段のセット、前記許可された垂直分割の数よりも前記許可された水平分割の数よりも小さい場合は第２のコンテキスト増加手段のセット、および、前記許可された垂直分割の数が前記許可された水平分割の数に等しい場合は第３のコンテキスト増加手段のセットから選択される、こと。"
                ],
                "claim5_limitations": [
                    "前記第１のコンテキスト増加手段のセットおよび前記第２のコンテキスト増加手段のセットのそれぞれは、単一のコンテキスト増加手段を含む。",
                    "前記第３のコンテキスト増加手段のセットは、複数のコンテキスト増加手段を含む。",
                    "前記第１のコンテキスト増加手段のセット、前記第２のコンテキスト増加手段のセット、および、前記第３のコンテキスト増加手段のセットにおけるコンテキスト増加手段は、それぞれ異なる、こと。"
                ],
                "claim6_limitations": [
                    "前記第１のコンテキスト増加手段のセットにおける前記単一のコンテキスト増加手段は、４の値を有する。",
                    "前記第２のコンテキスト増加手段のセットにおける前記単一のコンテキスト増加手段は、３の値を有する。",
                    "前記第３のコンテキスト増加手段のセットは、０の値を有する第３のコンテキスト増加手段、１の値を有する第４のコンテキスト増加手段、および、２の値を有する第５のコンテキスト増加手段を含む、こと。"
                ],
                "claim7_limitations": [
                    "前記第３のコンテキスト増加手段のセットからの前記コンテキスト増加手段の前記選択は更に、（１）前記現在のブロックの上に位置する第１の近傍のブロック、および、前記現在のブロックの左に位置する第２の近傍のブロックの利用可能性、（２）前記現在のブロックの寸法、および／または、（３）前記第１の近傍のブロックの寸法および／または前記第２の近傍のブロックの寸法に基づく、こと。"
                ],
                "claim8_limitations": [
                    "前記コンテキスト増加手段は、以下の少なくとも１つを満たす場合の第３のコンテキスト増加手段の値に割り当てられる：（１）前記現在のブロックの上に位置する前記第１の近傍のブロックが利用可能である、（２）前記現在のブロックの左に位置する前記第２の近傍のブロックが利用可能である、（３）ｄＡがｄＬに等しい、ｄＡは、前記第１の近傍のブロックが利用可能である場合に前記第１の近傍のブロックの幅によって除された前記現在のブロックの幅を示し、かつ、前記第１の近傍のブロックが利用可能でない場合に前記現在のブロックの幅を示す、ｄＬは、前記第２の近傍のブロックが利用可能である場合に前記第２の近傍のブロックの高さによって除された前記現在のブロックの高さを示し、かつ、前記第１の近傍のブロックが利用可能でない場合に前記現在のブロックの高さを示す、こと。"
                ],
                "claim9_limitations": [
                    "前記コンテキスト増加手段は、条件（ａ）が満たされず、かつ、条件（ｂ）が満たされる場合、第４のコンテキスト増加手段の値に割り当てられる。",
                    "前記条件（ａ）は、以下の少なくとも１つを満たすことを含む：（１）前記現在のブロックの上に位置する前記第１の近傍のブロックが利用可能でない、（２）前記現在のブロックの左に位置する前記第２の近傍のブロックが利用可能でない、（３）ｄＡがｄＬに等しい、ｄＡは、前記第１の近傍のブロックが利用可能である場合は前記第１の近傍のブロックの幅によって除された前記現在のブロックの幅を示し、かつ、前記第１の近傍のブロックが利用可能でない場合は前記現在のブロックの幅を示し、ｄＬは、前記第２の近傍のブロックが利用可能である場合は前記第２の近傍のブロックの高さによって除された前記現在のブロックの高さを示し、かつ、前記第２の近傍のブロックが利用可能でない場合は前記現在のブロックの高さを示し。",
                    "前記条件（ｂ）は、ｄＡがｄＬよりも小さいことを含む、こと。"
                ],
                "claim10_limitations": [
                    "前記コンテキスト増加手段は、条件（ａ）および条件（ｂ）がすべて満たされない場合、第５のコンテキスト増加手段の値が割り当てられる。",
                    "前記条件（ａ）は、以下の少なくとも１つを満たすことを含み、（１）前記現在のブロックの上に位置する前記第１の近傍のブロックが利用可能でない、（２）前記現在のブロックの左に位置する前記第２の近傍のブロックが利用可能でない、（３）ｄＡがｄＬに等しい、ｄＡは、前記第１の近傍のブロックが利用可能である場合は前記第１の近傍のブロックの幅によって除された前記現在のブロックの幅を示し、かつ、前記第１の近傍のブロックが利用可能でない場合は前記現在のブロックの幅を示し、ｄＬは、前記第２の近傍のブロックが利用可能である場合は前記第２の近傍のブロックの高さによって除された前記現在のブロックの高さを示し、かつ、前記第２の近傍のブロックが利用可能でない場合は前記現在のブロックの高さを示し。",
                    "前記条件（ｂ）は、ｄＡがｄＬよりも小さいことを含む、こと。"
                ],
                "claim11_limitations": [
                    "前記変換は、前記映像を前記ビットストリームに符号化することを含む、こと。"
                ],
                "claim12_limitations": [
                    "前記変換は、前記映像を前記ビットストリームから復号することを含む、こと。"
                ],
                "claim13_requirements": [
                    "プロセッサと、命令を有する非一時的メモリを有する、映像データを処理するための装置。",
                    "前記命令が前記プロセッサによって実行された際に、前記プロセッサに、規則に従って、映像の現在のブロックと、前記映像のビットストリームとの間の変換を実行させる。",
                    "前記規則は、前記現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定する。",
                    "前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含む。",
                    "前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含む。"
                ],
                "claim14_requirements": [
                    "プロセッサに、規則に従って、映像の現在のブロックと、前記映像のビットストリームとの間の変換を実行させる。",
                    "前記規則は、前記現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定する。",
                    "前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含む。",
                    "前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含む。",
                    "命令を格納する非一時的コンピュータ可読記憶媒体。"
                ],
                "claim15_requirements": [
                    "映像処理装置によって実行される方法によって生成される映像のビットストリームを格納する非一時的コンピュータ可読記録媒体。",
                    "前記方法は、規則に従って、前記映像の前記ビットストリームを生成すること、を有する。",
                    "前記規則は、現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定する。",
                    "前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含み、",
                    "前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含む。"
                ]
            }
        },
        {
            "step": "1",
            "role": "代理人",
            "content": "承知いたしました。特許庁の熟練した特許審査官アシスタントとして、本願発明の代理人の立場で、構造化された文献データに基づき、進歩性に関する論理的な主張を構築します。\n\n---\n\n## 第一の主張：Claim 1の進歩性\n\n### 1. 課題・解決原理の相違点\n\n本願発明は、「ビデオデータのコーディングにおいて、現在のビデオブロックへの転換中に、変換情報（二次変換に関する情報）を符号化すべきか否かを効率的に決定し、ビットストリームのサイズと処理負荷を最適化すること」を課題とし、その解決手段として、「現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素を構文解析するかどうかを決定することにより、二次変換の適用を制御する」ことを解決原理としています。\n\n一方、先行技術は、「映像のブロックとビットストリームとの間の変換における、構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択方法の最適化」を課題とし、その解決手段として、「現在のブロックが水平または垂直に分割されるか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択を、許可された垂直分割の数および許可された水平分割の数に基づいて行う」ことを解決原理としています。\n\nこのように、本願発明は二次変換の適用可否判断に焦点を当て、その判断基準として「最後の非ゼロ係数の位置」を利用するのに対し、先行技術はブロック分割の構文要素のコーディングにおけるコンテキスト増加手段の選択に焦点を当て、その判断基準として「許可される分割数」を利用するものであり、課題および解決原理において根本的な相違があります。\n\n### 2. 構成要件の相違点\n\n本願発明のClaim 1は、以下の要件を含みます。\n\n*   (a) ビデオデータをコーディングする方法であること。\n*   (b) ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。\n*   (c) 前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。\n\n一方、先行技術のClaim 1は、以下の要件を含みます。\n\n*   (A) 映像の現在のブロックと、映像のビットストリームとの間の変換を実行すること。\n*   (B) 前記規則は、前記現在のブロックは水平または垂直に分割するか否かを規定する構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択が、許可された垂直分割の数および許可された水平分割の数に基づくことを規定すること。\n*   (C) 前記許可された垂直分割の数は、許可されたバイナリ垂直分割の数、および、許可されたターナリ垂直分割の数を含むこと。\n*   (D) 前記許可された水平分割の数は、許可されたバイナリ水平分割の数、および、許可されたターナリ水平分割の数を含むこと。\n\n比較すると、本願発明のClaim 1の構成要件(b)および(c)に記載された、「現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かの決定を実行する」という点は、先行技術の構成要件(B)～(D)には全く開示されていません。先行技術は、ブロック分割の構文要素のコーディングにおけるコンテキスト増加手段の選択に関するものであり、二次変換の適用可否判断や、その判断基準として「最後の非ゼロ係数の位置」を利用する点において、本願発明のClaim 1とは明確に区別されます。\n\n### 3. 進歩性の根拠\n\n本願発明のClaim 1は、上記構成要件の相違点から、先行技術文献からは容易に想到できない進歩性を有します。\n\n具体的には、先行技術はブロック分割の決定に関わる構文要素のコーディング最適化に主眼を置いており、その判断基準は「許可される分割数」という、ブロック全体の状態や分割の可能性に基づくものです。これに対し、本願発明は、ブロック内の係数情報、とりわけ「最後の非ゼロ係数の位置」という、より詳細かつ局所的な情報に着目し、二次変換といった、より高度な変換処理の適用可否を判断するという、全く異なる課題解決アプローチを採用しています。\n\n映像コーディングにおいて、二次変換の適用は、ビットストリームサイズと処理負荷に大きな影響を与える重要な決定事項です。この適用可否を、ブロック内の係数分布（特に非ゼロ係数の終端位置）という直感的に理解しやすい情報に基づいて判断する手法は、先行技術のブロック分割のコンテキスト選択という技術分野からは、容易に類推・導出できるものではありません。\n\n「最後の非ゼロ係数の位置」という情報は、係数エネルギーの分布傾向を示唆するものであり、これを二次変換の適用可否判断に結びつける発想は、二次変換の適用により符号化効率が向上する可能性のあるブロックと、そうでないブロックを効率的に見分けるための、当業者の予測を超えた工夫であると考えられます。したがって、本願発明のClaim 1は、先行技術の開示内容から容易に想到できるものではなく、進歩性を有すると主張します。\n\n---\n\n## 予備的主張：Claim 2以降の進歩性\n\n本願発明のClaim 1の進歩性が仮に否定されたとしても、Claim 2以降の追加限定により、先行技術からは容易に想到できない進歩性を主張できると考えます。\n\n### Claim 2の追加限定について\n\nClaim 2は、「前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと。」および「当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと。」という限定を追加しています。\n\n先行技術は、コンテキスト増加手段の選択基準として「許可された分割数」を用いており、これはブロックの分割可能性に関する情報です。本願発明のClaim 2は、これに加えて「第１の条件を満足する少なくとも１つのコーディング基準」という、より具体的な適用判断基準を導入し、さらに、その決定に基づいて「変換情報を使用して転換を実行する」という、実際のアクションまで規定しています。\n\n先行技術からは、二次変換の適用判断や、その判断基準として「最後の非ゼロ係数の位置」と「第１の条件」を組み合わせるという具体的な動機付けは全く見出せません。先行技術の課題はコンテキスト増加手段の選択であり、二次変換の適用制御とは異なるため、Claim 2の追加限定は、先行技術から容易に想到できるものではないと主張します。\n\n### Claim 3の追加限定について\n\nClaim 3は、「前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと。」という限定を追加しています。\n\nこれは、Claim 2で述べた「変換情報を使用して転換を実行する」というステップを、具体的に「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な手法に限定するものです。\n\n先行技術は、ブロック分割の構文要素のコーディングに関するものであり、係数の脱量子化や残差係数への二次変換の適用といった、係数レベルでの具体的な処理については一切言及がありません。したがって、先行技術を参照して、本願発明のClaim 3における「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な処理を想到することは、当業者にとって容易ではないと考えられます。\n\n---"
        },
        {
            "step": "2",
            "role": "審査官",
            "content": "承知いたしました。特許庁の審査官として、代理人の主張を踏まえ、Claim 1の進歩性について客観的かつ厳格に審査します。\n\n---\n\n### 【第1段階：Claim 1 (幹) の検証】\n\n#### 1. 技術分野の関連性と動機付け（最重要）:\n\n*   **本願発明(A)と先行技術(B)の技術分野:**\n    *   本願発明(A)は、ビデオデータのコーディングにおける二次変換の適用制御に関するものです。\n    *   先行技術(B)は、映像のブロックとビットストリームとの間の変換（符号化、復号、トランスコーディング）における、構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択方法の最適化に関するものです。\n    *   両者は共に「映像（ビデオ）のブロック/ビデオブロック」と「ビットストリーム」との間の「変換」に関わる技術であり、映像符号化（コーディング）という**共通の技術分野**に属すると判断されます。\n\n*   **当業者が、Aの技術課題を解決するために、Bの技術を適用または改良しようとする動機付け（理由）:**\n    *   本願発明(A)の課題は、「二次変換に関する情報を符号化すべきか否かを効率的に決定し、ビットストリームのサイズと処理負荷を最適化すること」です。\n    *   先行技術(B)の課題は、「構文要素をコーディングするためのコンテキスト増加手段（ctxInc）の選択方法の最適化」であり、これはブロックの分割方法の選択に関わるもので、結果として符号化効率の向上に寄与するものです。\n    *   両者ともに、映像符号化における効率化（ビットストリームサイズ、処理負荷の最適化）を目指すという共通の目的を有しています。\n    *   先行技術(B)は、ブロックの分割に関する構文要素のコーディングを最適化する手法を開示しています。本願発明(A)は、二次変換の適用可否を決定するという、別の最適化手法を提案しています。\n    *   当業者は、映像符号化の効率をさらに向上させるために、ブロックの分割方法の選択（先行技術(B)）とは別に、二次変換の適用を制御する（本願発明(A)の課題）という、**異なる観点からの最適化手法**を検討することは考えられます。\n    *   しかしながら、先行技術(B)の解決原理は「許可された垂直分割の数」と「許可された水平分割の数」に基づいて「コンテキスト増加手段（ctxInc）」を選択することにあります。これは、ブロックの分割様式を決定するための符号化パラメータの選択に関わるものであり、本願発明(A)の「最後の非ゼロ係数の位置」に基づいて「二次変換の適用」を決定するという、**全く異なる情報（係数の位置）**を用い、**全く異なる判断（二次変換の適用有無）**を行う解決策とは、直接的な関連性が薄いです。\n    *   先行技術(B)を読んだ当業者が、その技術課題（ctxInc選択の最適化）とは別の課題（二次変換の適用制御）を認識し、かつ、その解決策として「最後の非ゼロ係数の位置」という情報を利用することを、Bの開示内容から**直接的かつ合理的に導き出すことは困難**であると考えられます。Bは係数の位置情報には全く言及しておらず、二次変換の適用についても触れていません。\n    *   したがって、現時点では、**「Bの技術を適用または改良しようとする直接的な動機付けは乏しい」**と判断します。\n\n*   **（重要：もし分野が無関係で動機付けが存在しない場合、直ちに「進歩性あり（容易想到ではない）」と結論付け、以降の比較は不要です。）**\n    *   上記検討の結果、技術分野は関連するものの、課題解決の観点からは**直接的な動機付けは乏しい**と判断します。よって、現段階で**Claim 1は「進歩性あり（容易想到ではない）」と結論付けます。**\n\n---\n\n**（審査官としての判断）**\n\nClaim 1は、先行技術(B)の開示内容からは、その技術課題（ctxInc選択の最適化）とは異なる課題（二次変換の適用可否判断）を設定しており、かつ、その解決手段として「最後の非ゼロ係数の位置」という、先行技術(B)には全く記載のない情報を利用する点が新規であり、また、先行技術(B)のブロック分割のコンテキスト選択という技術から、二次変換の適用制御という技術へ移行し、その判断基準として係数の位置情報を用いることへの**直接的な動機付けを見出すことが困難**であるため、当業者が容易に想到できるものではないと判断します。\n\nしたがって、**Claim 1は進歩性を有します（容易想到ではない）。**\n\n---\n**（補足：代理人の主張に対するコメント）**\n\n代理人主張の「課題・解決原理の相違点」および「構成要件の相違点」の指摘は、本審査官の判断と概ね合致しており、特に「最後の非ゼロ係数の位置」という判断基準の独自性、および先行技術との課題設定の相違点を的確に捉えていると考えられます。\n\n---\n\n（次の指示をお待ちしております。）"
        },
        {
            "step": "3",
            "role": "主任審査官",
            "content": "承知いたしました。主任審査官として、代理人の主張と審査官の検証結果を比較検討し、最終的な進歩性の判断を行います。\n\n---\n\n## 主任審査官による最終判断\n\n### 1. Claim 1 (幹) の進歩性\n\n**判断:** 容易想到ではない\n**理由:**\n本願発明のClaim 1は、先行技術(B)とは異なる課題（二次変換の適用制御）を設定し、その解決のために「最後の非ゼロ係数の位置」という、先行技術(B)には開示のない情報を利用する。先行技術(B)のブロック分割のコンテキスト選択という技術から、二次変換の適用制御へ移行し、その判断基準として係数の位置情報を用いることへの直接的な動機付けは乏しく、当業者が容易に想到できるものではないため。\n\n### 2. Claim 2 (枝1) の進歩性\n\n**判断:** 容易想到ではない\n**理由:**\nClaim 2は、Claim 1の判断に加え、「第１の条件を満足する少なくとも１つのコーディング基準」という判断基準の追加、および「変換情報を使用して転換を実行する」という具体的な処理を規定する。先行技術(B)はブロック分割のコンテキスト選択に関するものであり、二次変換の適用判断や、その判断基準として「最後の非ゼロ係数の位置」と「第１の条件」を組み合わせること、さらに実行することへの動機付けは先行技術(B)からは見出せない。\n\n### 3. Claim 3 (枝2) の進歩性\n\n**判断:** 容易想到ではない\n**理由:**\nClaim 3は、Claim 2の「転換を実行する」ステップを、「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な処理に限定する。先行技術(B)は、係数の脱量子化や残差係数への二次変換の適用といった係数レベルの処理には全く言及がなく、この具体的な処理を想到することは容易ではない。\n\n### 4. 総合結論\n\nClaim 1は、先行技術(B)との技術分野の関連性は認められるものの、設定された課題、採用された解決原理、および構成要件（特に判断基準となる情報）において相違があり、先行技術(B)から直接的かつ合理的に導き出すことが困難であるため、進歩性を有する（容易想到ではない）。\nさらに、Claim 2およびClaim 3の追加限定は、先行技術(B)からは何ら示唆や動機付けがなく、当業者が容易に想到できる範囲を超えるものである。\nよって、Claim 1, 2, 3はいずれも進歩性を有し、特許可能であると判断する。\n\n---\n\n## JSON形式出力\n\n```json\n{\n  \"claim1\": {\n    \"inventive\": true,\n    \"reason\": \"本願発明のClaim 1は、先行技術(B)とは異なる課題（二次変換の適用制御）を設定し、その解決のために「最後の非ゼロ係数の位置」という、先行技術(B)には開示のない情報を利用する。先行技術(B)のブロック分割のコンテキスト選択という技術から、二次変換の適用制御へ移行し、その判断基準として係数の位置情報を用いることへの直接的な動機付けは乏しく、当業者が容易に想到できるものではないため。\"\n  },\n  \"claim2\": {\n    \"inventive\": true,\n    \"reason\": \"Claim 2は、Claim 1の判断に加え、「第１の条件を満足する少なくとも１つのコーディング基準」という判断基準の追加、および「変換情報を使用して転換を実行する」という具体的な処理を規定する。先行技術(B)はブロック分割のコンテキスト選択に関するものであり、二次変換の適用判断や、その判断基準として「最後の非ゼロ係数の位置」と「第１の条件」を組み合わせること、さらに実行することへの動機付けは先行技術(B)からは見出せないため。\"\n  },\n  \"claim3\": {\n    \"inventive\": true,\n    \"reason\": \"Claim 3は、Claim 2の「転換を実行する」ステップを、「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な処理に限定する。先行技術(B)は、係数の脱量子化や残差係数への二次変換の適用といった係数レベルの処理には全く言及がなく、この具体的な処理を想到することは容易ではないため。\"\n  },\n  \"conclusion\": \"Claim 1, 2, 3はいずれも、先行技術(B)との比較において、課題設定、解決手段、および構成要件の点で相違があり、当業者が容易に想到できるものではないため、進歩性を有する。よって、Claim 1, 2, 3はいずれも特許可能であると判断する。\"\n}\n```"
        }
    ],
    "inventiveness": {
        "claim1": {
            "inventive": true,
            "reason": "本願発明のClaim 1は、先行技術(B)とは異なる課題（二次変換の適用制御）を設定し、その解決のために「最後の非ゼロ係数の位置」という、先行技術(B)には開示のない情報を利用する。先行技術(B)のブロック分割のコンテキスト選択という技術から、二次変換の適用制御へ移行し、その判断基準として係数の位置情報を用いることへの直接的な動機付けは乏しく、当業者が容易に想到できるものではないため。"
        },
        "claim2": {
            "inventive": true,
            "reason": "Claim 2は、Claim 1の判断に加え、「第１の条件を満足する少なくとも１つのコーディング基準」という判断基準の追加、および「変換情報を使用して転換を実行する」という具体的な処理を規定する。先行技術(B)はブロック分割のコンテキスト選択に関するものであり、二次変換の適用判断や、その判断基準として「最後の非ゼロ係数の位置」と「第１の条件」を組み合わせること、さらに実行することへの動機付けは先行技術(B)からは見出せないため。"
        },
        "claim3": {
            "inventive": true,
            "reason": "Claim 3は、Claim 2の「転換を実行する」ステップを、「脱量子化された残差係数値の結果に二次変換を適用する」という具体的な処理に限定する。先行技術(B)は、係数の脱量子化や残差係数への二次変換の適用といった係数レベルの処理には全く言及がなく、この具体的な処理を想到することは容易ではないため。"
        }
    },
    "prior_art_doc_number": "2023523638"
}