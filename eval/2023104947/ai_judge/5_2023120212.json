{
    "doc_number": "2023120212",
    "top_k": 5,
    "application_structure": {
        "problem": "ビデオデータをコーディングする際、現在のビデオブロックの転換中に、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを効率的に決定すること。",
        "solution_principle": "現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを決定する。",
        "claim1_requirements": [
            "ビデオデータをコーディングする方法であること。",
            "ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること。",
            "前記位置は、前記現在のビデオブロックの左上位置に対して相対的であること。",
            "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。"
        ],
        "claim2_limitations": [
            "前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと。",
            "当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと。"
        ],
        "claim3_limitations": [
            "前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと。"
        ],
        "claim4_limitations": [
            "前記変換情報は、分離不能な二次変換を示すこと。"
        ],
        "claim5_limitations": [
            "前記変換情報は、低周波分離不能変換を示すこと。"
        ],
        "claim6_limitations": [
            "前記構文要素が前記ビットストリームに含まれないときに、前記転換は、前記二次変換を使用しないで前記転換を実行することを含むこと。"
        ],
        "claim7_limitations": [
            "前記決定を実行することは、前記位置及び／又は第２の条件を満足しない少なくとも１つの他のコーディングの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含むこと。"
        ],
        "claim8_limitations": [
            "前記決定を実行することは、前記現在のビデオブロックのために使用されるコーディングモードが特定のタイプでないことの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含むこと。"
        ],
        "claim9_limitations": [
            "前記位置は、座標（ＬａｓｔＸ，ＬａｓｔＹ）によって表され、前記構文要素は、ＬａｓｔＸ≦Ｔｈ０及びＬａｓｔＹ≦Ｔｈ１であることの故に、前記ビットストリームに含まれることからスキップされ、ここで、Ｔｈ１及びＴｈ２は、数字であること。"
        ],
        "claim10_limitations": [
            "Ｔｈ１及びＴｈ２は予め定義され、前記ビットストリームにおいて信号化されないこと。"
        ],
        "claim11_limitations": [
            "Ｔｈ１及びＴｈ２は等しいこと。"
        ],
        "claim12_limitations": [
            "Ｔｈ１＝Ｔｈ２＝０であること。"
        ],
        "claim13_limitations": [
            "前記現在のビデオブロックの前記最後の非ゼロ係数の前記位置は、前記現在のビデオブロックの係数の順走査順序にあること。"
        ],
        "claim14_limitations": [
            "前記変換は、順変換または逆変換のうちの少なくとも１つを含むこと。"
        ],
        "claim15_limitations": [
            "前記決定に従って前記ビットストリームから前記現在のビデオブロックを復号化することによって前記転換を実行することを更に含むこと。"
        ],
        "claim16_limitations": [
            "前記決定に従って前記現在のビデオブロックを前記ビットストリームに符号化することによって前記転換を実行することを更に含むこと。"
        ],
        "claim17_requirements": [
            "ビデオデータをコーディングするための装置であること。",
            "プロセッサと、命令をその上に有する非一時的なメモリとを含むこと。",
            "前記命令は、前記プロセッサによって実行されると、前記プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせ、前記位置は、前記現在のビデオブロックの左上位置に対して相対的であり、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させること。"
        ],
        "claim18_requirements": [
            "命令を格納する非一時的なコンピュータ読取可能な記憶媒体であること。",
            "前記命令は、プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせ、前記位置は、前記現在のビデオブロックの左上位置に対して相対的であり、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させること。"
        ],
        "claim19_requirements": [
            "ビデオ処理装置によって実行される方法によって生成されるビットストリームを格納する非一時的なコンピュータ読取可能な記録媒体であること。",
            "前記方法は、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックすることであって、前記位置は、前記現在のビデオブロックの左上位置に対して相対的である、チェックすることと、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行することと、を含むこと。"
        ]
    },
    "prior_art_structure": {
        "problem": "変換スキップモードにおける係数符号化の効率を改善すること。",
        "solution_principle": "映像ブロックのイントラ予測モードで導出される量子化残差と予測との差をビットストリームに含めるか否かを判定し、その判定に基づいて変換を行う。変換スキップモードが適用されるか否かを示す構文要素をビットストリームに条件付きで含める。",
        "claim1_requirements": [
            "映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること",
            "前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと",
            "前記判定することに基づいて前記変換を行うこと",
            "変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること",
            "前記変換スキップモードにおいて、変換が予測残差に対してスキップされること"
        ],
        "claim2_limitations": [
            "前記差分コーディングモードが有効であると判定することに呼応して、前記変換スキップモードが適用されると推測される、こと。"
        ],
        "claim3_limitations": [
            "前記差分コーディングモードが有効であることに呼応して、前記第１の構文要素は前記ビットストリームから除外される、こと。"
        ],
        "claim4_limitations": [
            "前記第１の構文要素が前記ビットストリームに含まれるかどうかは、前記第１の映像ブロックのブロック寸法に基づく、こと。"
        ],
        "claim5_limitations": [
            "前記第１の構文要素が前記ビットストリームに含まれるかどうかは、前記第１の映像ブロックのコーディングツリー構造に基づく、こと。"
        ],
        "claim6_limitations": [
            "前記第１の構文要素が前記ビットストリームに存在しない場合、前記差分コーディングモードが有効であることを示す前記ビットストリームに含まれる第２の構文要素の値に呼応して、前記変換スキップモードが有効であると推測される、こと。",
            "前記第２の構文要素が前記ビットストリームに含まれることは、前記第１の映像ブロックのサイズが閾値以下であるという条件を含む条件下にある、こと。"
        ],
        "claim7_limitations": [
            "前記差分コーディングモードが有効であることを示す前記第２の構文要素の値に呼応して、前記第１の映像ブロックに適用される残差サンプルに対する前記差分コーディングモードの予測方向が垂直方向または水平方向であることを示す第３の構文要素が、前記ビットストリームに含まれる、こと。"
        ],
        "claim8_limitations": [
            "前記差分が、ブロックベースの差分パルスコーディング変調表現を使用して表現される、こと。"
        ],
        "claim9_limitations": [
            "前記映像領域は彩度ブロックである第２の映像ブロックをさらに含み、",
            "前記方法はさらに、前記第２の映像ブロックと前記映像の前記ビットストリームとの間の変換中に、前記第２の映像ブロックが、輝度コンポーネントと少なくとも１つの彩度コンポーネントとが別々のパーティションツリー構造を有する二重ツリー構造に含まれるかどうかを判定すること、を含むこと。",
            "前記第２の映像ブロックと前映像の前記ビットストリームとの間の変換が、前記第２の映像ブロックが前記二重ツリー構造に含まれるかどうかの前記判定に基づいて実行されること。",
            "第１の予測モードの前記第２の映像ブロックへの適用を示す第４の構文要素が前記ビットストリームに存在するかどうかは、少なくとも前記第２の映像ブロックが前記二重ツリー構造に含まれるかどうかに基づいていること。",
            "前記第１の予測モードでは、前記第２の映像ブロックの予測サンプルは、ブロックベクトルによって決定されるように、同じ復号された映像領域のサンプル値のブロックから導出される、こと。"
        ],
        "claim10_limitations": [
            "前記第２の映像ブロックが前記二重ツリー構造に含まれることに呼応して、前記第４の構文要素が前記ビットストリームに存在せず、",
            "前記第４の構文要素は、前記第１の予測モードが無効であることを示す特定の値として推測される、こと。"
        ],
        "claim11_limitations": [
            "前記第４の構文要素が前記ビットストリームに存在しない場合、前記第４の構文要素は、少なくとも前記第２の映像ブロックを含むスライスのタイプに基づいて推測される、こと。"
        ],
        "claim12_limitations": [
            "前記第１の予測モードが前記第２の映像ブロックに適用される場合、前記第１の予測モードのための候補リストの構築プロセスが実行されること。",
            "前記候補リストの前記構築プロセスは、少なくとも１つの空間候補を前記候補リストに追加すること、少なくとも１つの履歴ベースの動きベクトル予測候補を前記候補リストに追加すること、または、少なくとも１つのゼロ候補を前記候補リストに追加すること、のうちの少なくとも１つを含むこと。"
        ],
        "claim13_limitations": [
            "少なくとも１つの空間候補を前記候補リストに追加することは、特定の隣接ブロックＡ１における空間候補の利用可能性をチェックすることと、前記特定の隣接ブロックＡ１は、前記第２の映像ブロックに対して左下隅に隣接し、前記特定の隣接ブロックＡ１が利用可能であることに呼応して、前記特定の隣接ブロックＡ１における空間候補を前記候補リストに追加することと、特定の隣接ブロックＢ１における空間候補の利用可能性をチェックすることと、を含み、前記特定の隣接ブロックＢ１は、前記第２の映像ブロックに対して右上隅に隣接し、前記特定の隣接ブロックＢ１が利用可能であることに呼応して、前記特定の隣接ブロックＡ１における空間候補と同じ動き情報を有する前記特定の隣接ブロックＢ１における空間候補が、前記候補リストから除外されることを保証する、第１の冗長性チェックが実行される、こと。"
        ],
        "claim14_limitations": [
            "前記構築プロセスはさらに、前記少なくとも１つの空間候補を追加した後に、前記候補リストのサイズが、前記第１の予測モードに対して許容される最大リストサイズよりも小さい場合に、前記少なくとも１つの履歴ベースの動きベクトル予測候補を前記候補リストに追加すること、を含み、前記少なくとも１つの履歴ベースの動きベクトル予測候補を追加する場合に、同じ動き情報を有する候補が前記候補リストから除外されることを保証する、第２の冗長性チェックが実行される、こと。"
        ],
        "claim15_limitations": [
            "前記構築プロセスはさらに、前記候補リストのサイズが前記第１の予測モードに対して許容される最大リストサイズよりも小さいことに呼応して、前記少なくとも１つのゼロ候補を前記候補リストに追加すること、を含む、こと。"
        ],
        "claim16_limitations": [
            "前記変換は、前記第１の映像ブロックを前記ビットストリームに符号化することを含む、こと。"
        ],
        "claim17_limitations": [
            "前記変換は、前記ビットストリームから前記第１の映像ブロックに復号することを含む、こと。"
        ],
        "claim18_requirements": [
            "処理装置による実行時に、映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること。",
            "前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと。",
            "前記判定することに基づいて前記変換を行うこと。",
            "変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること。",
            "前記変換スキップモードにおいて、変換が予測残差に対してスキップされる、こと。"
        ],
        "claim19_requirements": [
            "処理装置に、映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定させること。",
            "前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと。",
            "前記判定することに基づいて前記変換を行わせること。",
            "変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること。",
            "前記変換スキップモードにおいて、変換が予測残差に対してスキップされる、こと。"
        ],
        "claim20_requirements": [
            "映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること。",
            "前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと。",
            "前記判定することに基づいて前記ビットストリームを生成すること。",
            "変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること。",
            "前記変換スキップモードにおいて、変換が予測残差に対してスキップされる、こと。"
        ]
    },
    "applicant_arguments": "## 第一の主張：Claim 1の進歩性\n\n### 1. 課題・解決原理の相違点\n\n本願発明は、「ビデオデータをコーディングする際、現在のビデオブロックの転換中に、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを効率的に決定すること」を課題とし、その解決原理として「現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを決定する」ことを特徴とする。\n\n一方、先行技術は、「変換スキップモードにおける係数符号化の効率を改善すること」を課題とし、その解決原理として「映像ブロックのイントラ予測モードで導出される量子化残差と予測との差をビットストリームに含めるか否かを判定し、その判定に基づいて変換を行う。変換スキップモードが適用されるか否かを示す構文要素をビットストリームに条件付きで含める」ことを特徴とする。\n\n両者の課題は、ビデオデータ（映像データ）のコーディングにおける効率化という点で類似しているが、本願発明は、**「二次変換のための変換情報」**の有無を決定する点に主眼を置いているのに対し、先行技術は、**「差分コーディングモード」**や**「変換スキップモード」**の適用可否を判定し、その判定に基づいて変換を行う点に主眼を置いている。この「変換情報」の対象と決定方法において、本願発明は先行技術とは異なるアプローチを採用している。\n\n### 2. 構成要件の相違点\n\n本願発明のClaim 1は、以下の要件を含む。\n\n*   ビデオデータをコーディングする方法であること。\n*   ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること。\n*   前記位置は、前記現在のビデオブロックの左上位置に対して相対的であること。\n*   前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。\n\n先行技術のClaim 1は、以下の要件を含む。\n\n*   映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること。\n*   前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと。\n*   前記判定することに基づいて前記変換を行うこと。\n*   変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること。\n*   前記変換スキップモードにおいて、変換が予測残差に対してスキップされること。\n\n両者を比較すると、以下の相違点が明らかになる。\n\n*   **決定の基準:** 本願発明は、「現在のビデオブロックの**最後の非ゼロ係数の位置**」を決定の基準としている。一方、先行技術は、「差分コーディングモードが有効であるか無効であるかの判定」を基準としている。\n*   **決定対象の情報:** 本願発明は、「**二次変換のための変換情報**」を識別する構文要素の有無を決定する。一方、先行技術は、「変換スキップモード」が適用されるか否かを示す構文要素の有無を決定する。\n*   **位置の相対性:** 本願発明は、「前記位置は、前記現在のビデオブロックの**左上位置に対して相対的**であること」を明示している。先行技術には、このような位置の相対性に関する直接的な記載はない。\n*   **二次変換:** 本願発明は、明確に「二次変換」という用語を使用している。先行技術では「変換」という一般的な用語が使用されている。\n\n### 3. 進歩性の根拠\n\n本願発明のClaim 1は、先行技術の開示内容からは容易に想到できない構成要素を含んでおり、進歩性を有する。\n\n具体的には、本願発明の核心は、「現在のビデオブロックの**最後の非ゼロ係数の位置**」という、ブロック内の係数分布に関する具体的な情報に基づいて、「**二次変換のための変換情報**」の有無を決定するという点にある。\n\n先行技術は、「差分コーディングモード」の有効性判定に基づいて、「変換スキップモード」の適用可否を決定しており、その判定要素は「量子化残差と予測との差」や「ブロック寸法」、「コーディングツリー構造」など、本願発明の「最後の非ゼロ係数の位置」とは全く異なる情報に基づいている。\n\n先行技術の開示からは、ブロック内の係数分布、特に最後の非ゼロ係数の位置情報が、二次変換の適用可否を決定するために有用であるという示唆は全く得られない。先行技術の当業者が、本願発明の課題を解決するために、先行技術の構成をそのまま適用したり、単に係数分布に着目して構成要素を変更したりすることは、動機付けがなく、容易に到達できるとは言えない。\n\n特に、「最後の非ゼロ係数の位置」を「左上位置に対して相対的」にチェックするという構成は、ブロック内での係数の重要度や分布を効率的に把握するための具体的な手法であり、先行技術の「差分コーディングモード」の有効性判定とは技術的アプローチが異なり、新たな効果（効率的な決定）をもたらすものである。\n\nしたがって、本願発明のClaim 1は、先行技術には開示されていない構成要素を含み、その構成から予測される効果とは異なる、予期せぬ効果を奏するものであるため、進歩性を有する。\n\n---\n\n## 予備的主張：Claim 2以降の進歩性\n\n**仮に、Claim 1の進歩性が否定されたとしても**、Claim 2およびClaim 3の追加限定を先行技術に適用することは、先行技術からは動機付けがなく、容易想到ではない。\n\n### Claim 2の追加限定について\n\n本願発明のClaim 2は、「前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと」および「当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと」を限定している。\n\n先行技術は、変換スキップモードが適用されるか否かを示す構文要素を「判定することに基づく」ビットストリームに条件付きで含めると記載している（先行技術Claim 1）。しかし、先行技術には、「**最後の非ゼロ係数の位置**」と「**第１の条件**」という特定の要素の組み合わせに基づいて、構文要素がビットストリームに含まれることを決定するという具体的な構成はない。\n\n先行技術の当業者が、本願発明のClaim 1の構成（最後の非ゼロ係数の位置に基づく決定）を前提とした上で、さらに「第１の条件」を導入し、その条件を満たす場合にのみ構文要素を含める、という構成を想到する動機付けは、先行技術の開示からは見出せない。また、そのように限定した結果として、変換情報を使用して転換を実行するという、本願発明の解決効果を達成できると容易に推測できるものでもない。\n\n### Claim 3の追加限定について\n\n本願発明のClaim 3は、「前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと」を限定している。\n\n先行技術は、「変換スキップモードにおいて、変換が予測残差に対してスキップされる」と記載している（先行技術Claim 1）。これは、変換スキップモードが有効な場合には、変換を行わないことを示唆している。\n\n本願発明のClaim 3は、構文要素に従って「二次変換」を「脱量子化された残差係数値の結果」に適用するという、より具体的な変換内容を規定している。先行技術が「変換スキップモード」において変換を「スキップ」する（行わない）可能性を示唆しているのに対し、本願発明は、構文要素が存在する場合に「二次変換」を「適用する」ことを明確に規定している。\n\n先行技術の当業者が、本願発明のClaim 1およびClaim 2の構成（最後の非ゼロ係数の位置、第１の条件に基づく決定）を前提とした上で、さらに「二次変換」を「脱量子化された残差係数値の結果」に適用するという具体的な変換内容を想到することは、先行技術の開示から直接導き出されるものではない。先行技術は、変換スキップモードの適用可否を決定することに主眼があり、具体的な変換内容の適用方法については、本願発明ほど詳細に規定していない。\n\nしたがって、Claim 2およびClaim 3の追加限定は、先行技術の開示からは容易に想到できない構成であり、進歩性を有する。",
    "examiner_review": "## 特許審査官による進歩性審査：Claim 1（幹）の検証\n\n### 【第1段階：Claim 1 (幹) の検証】\n\n#### 1. 技術分野の関連性と動機付け（最重要）:\n\n*   **本願発明(A)と先行技術(B)の技術分野の関連性:**\n    本願発明は「ビデオデータをコーディングする方法」、先行技術も「映像データ（ビデオデータに相当）の係数符号化の効率改善」を課題としており、**両者ともにデジタルビデオ信号の圧縮・符号化技術という、高度に関連する技術分野**に属する。具体的には、ビデオコーディングにおけるブロック単位の処理、変換、係数処理、ビットストリームへの格納といった要素技術において共通性が見られる。\n\n*   **当業者が、Aの技術課題を解決するために、Bの技術を適用または改良しようとする動機付け:**\n    本願発明の課題は、「ビデオデータをコーディングする際、現在のビデオブロックの転換中に、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを効率的に決定すること」である。\n    一方、先行技術Bは、「変換スキップモードにおける係数符号化の効率を改善すること」を目的とし、「変換スキップモードが適用されるか否かを示す構文要素をビットストリームに条件付きで含める」ことを開示している。\n    当業者は、ビデオコーディングにおける効率改善という共通の目的を持つ技術分野において、先行技術Bが「変換スキップモード」の適用可否を決定するために構文要素を用いる手法を開示していることを知っている。\n    本願発明Aが対象とする「二次変換のための変換情報」の有無を決定するという課題は、先行技術Bの「変換スキップモード」の適用可否を決定する課題と、**「ある特定の情報（変換情報／変換スキップモード）をビットストリームに含めるか否かの決定」**という点で類似している。\n    したがって、当業者は、**先行技術Bにおける「構文要素を用いた決定手法」の考え方を応用し、本願発明Aの「二次変換のための変換情報」の有無を決定する課題に適用することを検討する動機付けが存在する**と言える。具体的には、先行技術Bが「判定することに基づいて」構文要素を決定していることから、本願発明Aにおいても、何らかの「判定」や「チェック」に基づいて「二次変換のための変換情報」に関する構文要素の有無を決定することを試みる可能性がある。\n\n*   **結論:**\n    両者は関連技術分野に属し、当業者は、**先行技術Bにおける構文要素を用いた情報伝達・制御の仕組みを、本願発明Aの「二次変換のための変換情報」の有無を決定する課題に適用しようとする動機付けが存在する**と判断される。\n\n#### 2. 構成要件の比較と容易性:\n\n*   **AとBの差分:**\n    本願発明Claim 1は、以下の構成要件を要求している。\n    1.  「現在のビデオブロックの**最後の非ゼロ係数の位置**をチェックすること」\n    2.  「前記位置は、前記現在のビデオブロックの**左上位置に対して相対的**であること」\n    3.  「前記位置に基づいて、**二次変換のための変換情報**を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること」\n\n    一方、先行技術Claim 1は、以下の構成要件を要求している。\n    a. 「差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること」\n    b. 「前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと」\n    c. 「前記判定することに基づいて前記変換を行うこと」\n    d. 「変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること」\n    e. 「前記変換スキップモードにおいて、変換が予測残差に対してスキップされること」\n\n    主な差分は以下の通りである。\n    *   **決定の基準:** Aは「最後の非ゼロ係数の位置」を基準とする。Bは「差分コーディングモードの有効性判定（量子化残差と予測との差）」を基準とする。\n    *   **決定対象:** Aは「二次変換のための変換情報」の有無を決定する。Bは「変換スキップモード」の適用可否を示す構文要素の有無を決定する。\n    *   **位置の特定方法:** Aは「左上位置に対する相対的な位置」を明示する。Bには、このような具体的な位置特定方法の記載はない。\n\n*   **差分の容易性:**\n    当業者は、ビデオコーディングにおいて、ブロック内の係数情報を利用して何らかの決定を行うことは周知である。例えば、係数の非ゼロ数や、高周波係数に非ゼロ係数が存在するか否か、といった情報は、ブロックの複雑度や符号化効率を判断するために利用されうる。\n    しかし、**「最後の非ゼロ係数の位置」という、ブロックの空間的な末尾に近い係数に注目し、それを「二次変換」の適用可否という、より高度な変換処理に関する情報の決定に結びつけることは、先行技術Bからは直接示唆されていない。**\n    先行技術Bが「差分コーディングモード」の有効性判定という、係数そのものの差分に着目しているのに対し、本願発明Aは「最後の非ゼロ係数の位置」という、係数分布の**空間的な端**に着目している。この「最後の非ゼロ係数の位置」が、「二次変換」の適用可否を決定する直接的な指標となるという関係性は、技術常識から直ちに導かれるものではない。\n    また、「左上位置に対して相対的」という記載も、単なる座標系の定義に過ぎず、それ自体が容易に想到できる事項であるとは言えないが、重要なのは「最後の非ゼロ係数の位置」という基準である。\n\n    要するに、**「最後の非ゼロ係数の位置」という特定の情報に着目し、それを「二次変換」の適用可否の決定に結びつけるという構成は、先行技術Bの「差分コーディングモード」の有効性判定や「変換スキップモード」の適用可否決定とは、着目する情報（係数分布の端 vs 差分、ブロックサイズ等）も、決定対象（二次変換情報 vs 変換スキップモード）も異なり、先行技術Bや技術常識から容易に想到できるものではない。**\n\n#### 3. 効果の予測可能性:\n\n*   本願発明Aは、「最後の非ゼロ係数の位置」という情報に基づいて「二次変換のための変換情報」の有無を決定することにより、「効率的に決定すること」を目的としている。\n*   先行技術Bは、「差分コーディングモード」の有効性判定に基づいて「変換スキップモード」の適用可否を決定することにより、「係数符号化の効率を改善すること」を目的としている。\n*   本願発明Aの「最後の非ゼロ係数の位置」という基準が、**「二次変換」の適用有無の決定において、先行技術Bの基準（差分コーディングモードの有効性等）と比較して、どのような「格別な効果」をもたらすのかは、現時点では明確ではない。** 代理人の主張では「新たな効果（効率的な決定）」とされているが、その「効率性」が、先行技術Bの効率改善効果と比較して、あるいは単なる設計上の選択肢として、顕著なものであるとは断定できない。\n*   しかし、進歩性判断においては、構成要件の新規性・進歩性が認められれば、それによって奏される効果が予測可能か否かは、進歩性判断を否定する決定的な理由とはなりにくい。むしろ、**新規な構成から予期せぬ効果が生じている場合は、進歩性が肯定される方向に働く。** ここでは、構成要件の相違点に重きを置く。\n\n#### 4. 結論 (Claim 1):\n\nClaim 1は、先行技術Bとは異なる「最後の非ゼロ係数の位置」という基準に基づき、「二次変換のための変換情報」の有無を決定するという構成を有している。この「最後の非ゼロ係数の位置」という着眼点、およびそれを「二次変換」の適用可否決定に結びつける点は、先行技術Bの開示内容や、ビデオコーディングにおける一般的な技術常識から、当業者が容易に想到できるものではない。先行技術Bは「差分コーディングモード」や「変換スキップモード」に関するものであり、本願発明Aの「二次変換」に関する決定とは技術的アプローチが異なる。\nしたがって、Claim 1は**進歩性を有する（容易想到ではない）**と判断する。\n\n---\n\n（第1段階の結論「Claim 1は進歩性を有する（容易想到ではない）」に基づき、第2段階の審査は、厳密には不要となります。しかし、指示に従い、Claim 2以降の検証も形式的に行います。）\n\n### 【第2段階：Claim 2以降 (枝葉) の検証】\n\nClaim 1が容易想到ではないと判断されたため、Claim 2以降の追加限定の進歩性について、本来であれば詳細な検討は不要ですが、指示に従い、Claim 1の構成を前提とした上で、各限定について審査します。\n\n*   **Claim 2（枝1）の検討:**\n    Claim 2は、「前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと」および「当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと」を限定している。\n    *   **「第１の条件」の検討:** 「第１の条件」が具体的にどのようなものであるか不明であるが、一般的に、ビデオコーディングにおいては、ブロックサイズ、コーディングモード、符号化の複雑度など、様々な「コーディング基準」が存在し、それらを組み合わせて符号化の決定を行うことは技術常識である。もし「第１の条件」が、これらの周知のコーディング基準のうち、既存の技術で一般的に用いられるもの（例：特定のブロックサイズ以下である、特定のコーディングモードが選択されている等）であれば、それを「最後の非ゼロ係数の位置」という基準に加えて適用することは、**技術常識の範囲内**であり、容易想到となりうる。\n    *   **「変換情報を使用して前記転換を実行すること」の検討:** Claim 1の解決原理が「最後の非ゼロ係数の位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かの決定を実行すること」であり、その決定された情報（構文要素）を利用して「変換」を実行することは、その決定の**当然の帰結**であり、**格別な効果を生むとは言えない**。これは、先行技術Bにおける「判定することに基づいて変換を行う」「変換スキップモードが適用されるかどうかを示す構文要素が、判定に基づいてビットストリームに含まれている」という記載とも類似しており、技術常識の範囲内である。\n    *   **結論として、Claim 2の追加限定は、その「第１の条件」の内容次第ではあるが、一般的に、既存のコーディング基準の適用や、決定された情報に基づく転換の実行という点では、容易想到となりうる。** （ただし、Claim 1自体に進歩性があるため、Claim 2以降の独立した進歩性判断は、相対的な意義にとどまる。）\n\n*   **Claim 3（枝2）の検討:**\n    Claim 3は、「前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと」を限定している。\n    *   本願発明の解決原理が「二次変換」に関する情報決定であり、Claim 1およびClaim 2において、その情報を用いて「転換」を行うことを示唆している。Claim 3は、その「転換」が具体的に「二次変換」であり、「脱量子化された残差係数値の結果」に適用されることを明示している。\n    *   ビデオコーディングにおいて、脱量子化された係数に対して逆変換（二次変換）を適用することは、一般的な処理である。また、本願発明が「二次変換」に関する情報決定を扱っている以上、その決定に従って「二次変換」を適用することは、**技術的な整合性**から見て当然であり、**容易に想到できる**。\n    *   **結論として、Claim 3の追加限定は、先行技術からは独立した進歩性を有するとは言えず、容易想到である。**\n\n（注：本来、Claim 1に進歩性が認められれば、それ以降の請求項（枝葉）についても、その追加限定が容易想到か否か、という観点で審査が進みます。Claim 1の構成要素が先行技術にない新規なものであり、かつ容易でない場合、それを前提としたClaim 2以降も、その追加限定が単なる技術常識や最適化の範囲を超えない限り、容易想到ではないと判断される傾向にあります。しかし、ここでは指示に従い、個別の追加限定についても容易性・格別効果の観点から審査しました。）",
    "final_decision": "## 進歩性判断（主任審査官）\n\n### 1. Claim 1 (幹) の進歩性\n**判断:** 容易想到ではない\n**理由:** 本願発明Claim 1は、先行技術Bとは異なり、「現在のビデオブロックの最後の非ゼロ係数の位置」という具体的な係数分布情報に基づいて、「二次変換のための変換情報」の有無を決定する構成を採用している。先行技術Bは「差分コーディングモードの有効性判定」を基準としており、「最後の非ゼロ係数の位置」という情報と「二次変換」の適用可否との関連性は、先行技術Bやビデオコーディング分野の技術常識からは直接導き出されず、当業者が容易に想到できるものではない。したがって、構成上の顕著な相違があり、進歩性を有する。\n\n### 2. Claim 2 (枝1) の進歩性\n**判断:** 容易想到である\n**理由:** Claim 2の追加限定は、「第1の条件」を満足するコーディング基準の適用と、決定された変換情報を用いた転換の実行を規定している。ビデオコーディングにおける「第1の条件」が周知のコーディング基準（例：ブロックサイズ、モード等）であれば、それを既存の決定基準に加えて適用することは容易である。また、決定された情報を用いて後続の処理（転換）を実行することは、その決定の当然の帰結であり、格別な効果をもたらすものではない。したがって、Claim 1の構成にこれらの限定を加えることは、容易想到である。\n\n### 3. Claim 3 (枝2) の進歩性\n**判断:** 容易想到である\n**理由:** Claim 3は、転換として「二次変換」を「脱量子化された残差係数値の結果」に適用することを限定している。本願発明が「二次変換」に関する情報決定を扱っていることから、その決定に従って「二次変換」を適用することは、技術的な整合性から見て当然の処理であり、技術常識の範囲内である。したがって、Claim 1およびClaim 2の構成にこの限定を加えることは、容易想到である。\n\n### 4. 総合結論\n\nClaim 1は、先行技術Bの開示内容や技術常識からは容易に想到できない構成（最後の非ゼロ係数の位置に基づく二次変換情報の決定）を有しており、進歩性が認められる。\nしかしながら、Claim 2およびClaim 3の追加限定は、それ自体が技術常識の範囲内であるか、あるいはClaim 1の構成から当然導かれる処理・限定であるため、容易想到であると判断される。\nしたがって、Claim 1の構成、すなわち「最後の非ゼロ係数の位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かの決定を実行すること」が、先行技術と比較して顕著な特徴となり、進歩性が認められる。\n\n```json\n{\n  \"claim1\": {\n    \"inventive\": true,\n    \"reason\": \"本願発明Claim 1は、先行技術Bとは異なり、「現在のビデオブロックの最後の非ゼロ係数の位置」という具体的な係数分布情報に基づいて、「二次変換のための変換情報」の有無を決定する構成を採用している。先行技術Bは「差分コーディングモードの有効性判定」を基準としており、「最後の非ゼロ係数の位置」という情報と「二次変換」の適用可否との関連性は、先行技術Bやビデオコーディング分野の技術常識からは直接導き出されず、当業者が容易に想到できるものではない。したがって、構成上の顕著な相違があり、進歩性を有する。\"\n  },\n  \"claim2\": {\n    \"inventive\": false,\n    \"reason\": \"Claim 2の追加限定は、「第1の条件」を満足するコーディング基準の適用と、決定された変換情報を用いた転換の実行を規定している。「第1の条件」が周知のコーディング基準であれば、それを加えて適用することは容易であり、決定された情報を用いた転換の実行は、その決定の当然の帰結である。したがって、容易想到である。\"\n  },\n  \"claim3\": {\n    \"inventive\": false,\n    \"reason\": \"Claim 3は、転換として「二次変換」を「脱量子化された残差係数値の結果」に適用することを限定している。本願発明が「二次変換」に関する情報決定を扱っていることから、その決定に従って「二次変換」を適用することは、技術的な整合性から見て当然の処理であり、技術常識の範囲内である。したがって、容易想到である。\"\n  },\n  \"conclusion\": \"Claim 1は、先行技術Bの開示内容や技術常識からは容易に想到できない構成を有しており、進歩性が認められる。しかしながら、Claim 2およびClaim 3の追加限定は、それ自体が技術常識の範囲内であるか、あるいはClaim 1の構成から当然導かれる処理・限定であるため、容易想到であると判断される。したがって、Claim 1の構成は特許性を有する。\"\n}\n```",
    "conversation_history": [
        {
            "step": "0.1 Claim",
            "role": "構造化",
            "content": {
                "problem": "ビデオデータをコーディングする際、現在のビデオブロックの転換中に、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを効率的に決定すること。",
                "solution_principle": "現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを決定する。",
                "claim1_requirements": [
                    "ビデオデータをコーディングする方法であること。",
                    "ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること。",
                    "前記位置は、前記現在のビデオブロックの左上位置に対して相対的であること。",
                    "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。"
                ],
                "claim2_limitations": [
                    "前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと。",
                    "当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと。"
                ],
                "claim3_limitations": [
                    "前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと。"
                ],
                "claim4_limitations": [
                    "前記変換情報は、分離不能な二次変換を示すこと。"
                ],
                "claim5_limitations": [
                    "前記変換情報は、低周波分離不能変換を示すこと。"
                ],
                "claim6_limitations": [
                    "前記構文要素が前記ビットストリームに含まれないときに、前記転換は、前記二次変換を使用しないで前記転換を実行することを含むこと。"
                ],
                "claim7_limitations": [
                    "前記決定を実行することは、前記位置及び／又は第２の条件を満足しない少なくとも１つの他のコーディングの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含むこと。"
                ],
                "claim8_limitations": [
                    "前記決定を実行することは、前記現在のビデオブロックのために使用されるコーディングモードが特定のタイプでないことの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含むこと。"
                ],
                "claim9_limitations": [
                    "前記位置は、座標（ＬａｓｔＸ，ＬａｓｔＹ）によって表され、前記構文要素は、ＬａｓｔＸ≦Ｔｈ０及びＬａｓｔＹ≦Ｔｈ１であることの故に、前記ビットストリームに含まれることからスキップされ、ここで、Ｔｈ１及びＴｈ２は、数字であること。"
                ],
                "claim10_limitations": [
                    "Ｔｈ１及びＴｈ２は予め定義され、前記ビットストリームにおいて信号化されないこと。"
                ],
                "claim11_limitations": [
                    "Ｔｈ１及びＴｈ２は等しいこと。"
                ],
                "claim12_limitations": [
                    "Ｔｈ１＝Ｔｈ２＝０であること。"
                ],
                "claim13_limitations": [
                    "前記現在のビデオブロックの前記最後の非ゼロ係数の前記位置は、前記現在のビデオブロックの係数の順走査順序にあること。"
                ],
                "claim14_limitations": [
                    "前記変換は、順変換または逆変換のうちの少なくとも１つを含むこと。"
                ],
                "claim15_limitations": [
                    "前記決定に従って前記ビットストリームから前記現在のビデオブロックを復号化することによって前記転換を実行することを更に含むこと。"
                ],
                "claim16_limitations": [
                    "前記決定に従って前記現在のビデオブロックを前記ビットストリームに符号化することによって前記転換を実行することを更に含むこと。"
                ],
                "claim17_requirements": [
                    "ビデオデータをコーディングするための装置であること。",
                    "プロセッサと、命令をその上に有する非一時的なメモリとを含むこと。",
                    "前記命令は、前記プロセッサによって実行されると、前記プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせ、前記位置は、前記現在のビデオブロックの左上位置に対して相対的であり、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させること。"
                ],
                "claim18_requirements": [
                    "命令を格納する非一時的なコンピュータ読取可能な記憶媒体であること。",
                    "前記命令は、プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせ、前記位置は、前記現在のビデオブロックの左上位置に対して相対的であり、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させること。"
                ],
                "claim19_requirements": [
                    "ビデオ処理装置によって実行される方法によって生成されるビットストリームを格納する非一時的なコンピュータ読取可能な記録媒体であること。",
                    "前記方法は、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックすることであって、前記位置は、前記現在のビデオブロックの左上位置に対して相対的である、チェックすることと、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行することと、を含むこと。"
                ]
            }
        },
        {
            "step": "0.2 Candidate Prior Art",
            "role": "構造化",
            "content": {
                "problem": "変換スキップモードにおける係数符号化の効率を改善すること。",
                "solution_principle": "映像ブロックのイントラ予測モードで導出される量子化残差と予測との差をビットストリームに含めるか否かを判定し、その判定に基づいて変換を行う。変換スキップモードが適用されるか否かを示す構文要素をビットストリームに条件付きで含める。",
                "claim1_requirements": [
                    "映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること",
                    "前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと",
                    "前記判定することに基づいて前記変換を行うこと",
                    "変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること",
                    "前記変換スキップモードにおいて、変換が予測残差に対してスキップされること"
                ],
                "claim2_limitations": [
                    "前記差分コーディングモードが有効であると判定することに呼応して、前記変換スキップモードが適用されると推測される、こと。"
                ],
                "claim3_limitations": [
                    "前記差分コーディングモードが有効であることに呼応して、前記第１の構文要素は前記ビットストリームから除外される、こと。"
                ],
                "claim4_limitations": [
                    "前記第１の構文要素が前記ビットストリームに含まれるかどうかは、前記第１の映像ブロックのブロック寸法に基づく、こと。"
                ],
                "claim5_limitations": [
                    "前記第１の構文要素が前記ビットストリームに含まれるかどうかは、前記第１の映像ブロックのコーディングツリー構造に基づく、こと。"
                ],
                "claim6_limitations": [
                    "前記第１の構文要素が前記ビットストリームに存在しない場合、前記差分コーディングモードが有効であることを示す前記ビットストリームに含まれる第２の構文要素の値に呼応して、前記変換スキップモードが有効であると推測される、こと。",
                    "前記第２の構文要素が前記ビットストリームに含まれることは、前記第１の映像ブロックのサイズが閾値以下であるという条件を含む条件下にある、こと。"
                ],
                "claim7_limitations": [
                    "前記差分コーディングモードが有効であることを示す前記第２の構文要素の値に呼応して、前記第１の映像ブロックに適用される残差サンプルに対する前記差分コーディングモードの予測方向が垂直方向または水平方向であることを示す第３の構文要素が、前記ビットストリームに含まれる、こと。"
                ],
                "claim8_limitations": [
                    "前記差分が、ブロックベースの差分パルスコーディング変調表現を使用して表現される、こと。"
                ],
                "claim9_limitations": [
                    "前記映像領域は彩度ブロックである第２の映像ブロックをさらに含み、",
                    "前記方法はさらに、前記第２の映像ブロックと前記映像の前記ビットストリームとの間の変換中に、前記第２の映像ブロックが、輝度コンポーネントと少なくとも１つの彩度コンポーネントとが別々のパーティションツリー構造を有する二重ツリー構造に含まれるかどうかを判定すること、を含むこと。",
                    "前記第２の映像ブロックと前映像の前記ビットストリームとの間の変換が、前記第２の映像ブロックが前記二重ツリー構造に含まれるかどうかの前記判定に基づいて実行されること。",
                    "第１の予測モードの前記第２の映像ブロックへの適用を示す第４の構文要素が前記ビットストリームに存在するかどうかは、少なくとも前記第２の映像ブロックが前記二重ツリー構造に含まれるかどうかに基づいていること。",
                    "前記第１の予測モードでは、前記第２の映像ブロックの予測サンプルは、ブロックベクトルによって決定されるように、同じ復号された映像領域のサンプル値のブロックから導出される、こと。"
                ],
                "claim10_limitations": [
                    "前記第２の映像ブロックが前記二重ツリー構造に含まれることに呼応して、前記第４の構文要素が前記ビットストリームに存在せず、",
                    "前記第４の構文要素は、前記第１の予測モードが無効であることを示す特定の値として推測される、こと。"
                ],
                "claim11_limitations": [
                    "前記第４の構文要素が前記ビットストリームに存在しない場合、前記第４の構文要素は、少なくとも前記第２の映像ブロックを含むスライスのタイプに基づいて推測される、こと。"
                ],
                "claim12_limitations": [
                    "前記第１の予測モードが前記第２の映像ブロックに適用される場合、前記第１の予測モードのための候補リストの構築プロセスが実行されること。",
                    "前記候補リストの前記構築プロセスは、少なくとも１つの空間候補を前記候補リストに追加すること、少なくとも１つの履歴ベースの動きベクトル予測候補を前記候補リストに追加すること、または、少なくとも１つのゼロ候補を前記候補リストに追加すること、のうちの少なくとも１つを含むこと。"
                ],
                "claim13_limitations": [
                    "少なくとも１つの空間候補を前記候補リストに追加することは、特定の隣接ブロックＡ１における空間候補の利用可能性をチェックすることと、前記特定の隣接ブロックＡ１は、前記第２の映像ブロックに対して左下隅に隣接し、前記特定の隣接ブロックＡ１が利用可能であることに呼応して、前記特定の隣接ブロックＡ１における空間候補を前記候補リストに追加することと、特定の隣接ブロックＢ１における空間候補の利用可能性をチェックすることと、を含み、前記特定の隣接ブロックＢ１は、前記第２の映像ブロックに対して右上隅に隣接し、前記特定の隣接ブロックＢ１が利用可能であることに呼応して、前記特定の隣接ブロックＡ１における空間候補と同じ動き情報を有する前記特定の隣接ブロックＢ１における空間候補が、前記候補リストから除外されることを保証する、第１の冗長性チェックが実行される、こと。"
                ],
                "claim14_limitations": [
                    "前記構築プロセスはさらに、前記少なくとも１つの空間候補を追加した後に、前記候補リストのサイズが、前記第１の予測モードに対して許容される最大リストサイズよりも小さい場合に、前記少なくとも１つの履歴ベースの動きベクトル予測候補を前記候補リストに追加すること、を含み、前記少なくとも１つの履歴ベースの動きベクトル予測候補を追加する場合に、同じ動き情報を有する候補が前記候補リストから除外されることを保証する、第２の冗長性チェックが実行される、こと。"
                ],
                "claim15_limitations": [
                    "前記構築プロセスはさらに、前記候補リストのサイズが前記第１の予測モードに対して許容される最大リストサイズよりも小さいことに呼応して、前記少なくとも１つのゼロ候補を前記候補リストに追加すること、を含む、こと。"
                ],
                "claim16_limitations": [
                    "前記変換は、前記第１の映像ブロックを前記ビットストリームに符号化することを含む、こと。"
                ],
                "claim17_limitations": [
                    "前記変換は、前記ビットストリームから前記第１の映像ブロックに復号することを含む、こと。"
                ],
                "claim18_requirements": [
                    "処理装置による実行時に、映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること。",
                    "前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと。",
                    "前記判定することに基づいて前記変換を行うこと。",
                    "変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること。",
                    "前記変換スキップモードにおいて、変換が予測残差に対してスキップされる、こと。"
                ],
                "claim19_requirements": [
                    "処理装置に、映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定させること。",
                    "前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと。",
                    "前記判定することに基づいて前記変換を行わせること。",
                    "変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること。",
                    "前記変換スキップモードにおいて、変換が予測残差に対してスキップされる、こと。"
                ],
                "claim20_requirements": [
                    "映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること。",
                    "前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと。",
                    "前記判定することに基づいて前記ビットストリームを生成すること。",
                    "変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること。",
                    "前記変換スキップモードにおいて、変換が予測残差に対してスキップされる、こと。"
                ]
            }
        },
        {
            "step": "1",
            "role": "代理人",
            "content": "## 第一の主張：Claim 1の進歩性\n\n### 1. 課題・解決原理の相違点\n\n本願発明は、「ビデオデータをコーディングする際、現在のビデオブロックの転換中に、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを効率的に決定すること」を課題とし、その解決原理として「現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを決定する」ことを特徴とする。\n\n一方、先行技術は、「変換スキップモードにおける係数符号化の効率を改善すること」を課題とし、その解決原理として「映像ブロックのイントラ予測モードで導出される量子化残差と予測との差をビットストリームに含めるか否かを判定し、その判定に基づいて変換を行う。変換スキップモードが適用されるか否かを示す構文要素をビットストリームに条件付きで含める」ことを特徴とする。\n\n両者の課題は、ビデオデータ（映像データ）のコーディングにおける効率化という点で類似しているが、本願発明は、**「二次変換のための変換情報」**の有無を決定する点に主眼を置いているのに対し、先行技術は、**「差分コーディングモード」**や**「変換スキップモード」**の適用可否を判定し、その判定に基づいて変換を行う点に主眼を置いている。この「変換情報」の対象と決定方法において、本願発明は先行技術とは異なるアプローチを採用している。\n\n### 2. 構成要件の相違点\n\n本願発明のClaim 1は、以下の要件を含む。\n\n*   ビデオデータをコーディングする方法であること。\n*   ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること。\n*   前記位置は、前記現在のビデオブロックの左上位置に対して相対的であること。\n*   前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。\n\n先行技術のClaim 1は、以下の要件を含む。\n\n*   映像の映像領域における第１の映像ブロックと前記映像のビットストリームとの間の変換中に、差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること。\n*   前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと。\n*   前記判定することに基づいて前記変換を行うこと。\n*   変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること。\n*   前記変換スキップモードにおいて、変換が予測残差に対してスキップされること。\n\n両者を比較すると、以下の相違点が明らかになる。\n\n*   **決定の基準:** 本願発明は、「現在のビデオブロックの**最後の非ゼロ係数の位置**」を決定の基準としている。一方、先行技術は、「差分コーディングモードが有効であるか無効であるかの判定」を基準としている。\n*   **決定対象の情報:** 本願発明は、「**二次変換のための変換情報**」を識別する構文要素の有無を決定する。一方、先行技術は、「変換スキップモード」が適用されるか否かを示す構文要素の有無を決定する。\n*   **位置の相対性:** 本願発明は、「前記位置は、前記現在のビデオブロックの**左上位置に対して相対的**であること」を明示している。先行技術には、このような位置の相対性に関する直接的な記載はない。\n*   **二次変換:** 本願発明は、明確に「二次変換」という用語を使用している。先行技術では「変換」という一般的な用語が使用されている。\n\n### 3. 進歩性の根拠\n\n本願発明のClaim 1は、先行技術の開示内容からは容易に想到できない構成要素を含んでおり、進歩性を有する。\n\n具体的には、本願発明の核心は、「現在のビデオブロックの**最後の非ゼロ係数の位置**」という、ブロック内の係数分布に関する具体的な情報に基づいて、「**二次変換のための変換情報**」の有無を決定するという点にある。\n\n先行技術は、「差分コーディングモード」の有効性判定に基づいて、「変換スキップモード」の適用可否を決定しており、その判定要素は「量子化残差と予測との差」や「ブロック寸法」、「コーディングツリー構造」など、本願発明の「最後の非ゼロ係数の位置」とは全く異なる情報に基づいている。\n\n先行技術の開示からは、ブロック内の係数分布、特に最後の非ゼロ係数の位置情報が、二次変換の適用可否を決定するために有用であるという示唆は全く得られない。先行技術の当業者が、本願発明の課題を解決するために、先行技術の構成をそのまま適用したり、単に係数分布に着目して構成要素を変更したりすることは、動機付けがなく、容易に到達できるとは言えない。\n\n特に、「最後の非ゼロ係数の位置」を「左上位置に対して相対的」にチェックするという構成は、ブロック内での係数の重要度や分布を効率的に把握するための具体的な手法であり、先行技術の「差分コーディングモード」の有効性判定とは技術的アプローチが異なり、新たな効果（効率的な決定）をもたらすものである。\n\nしたがって、本願発明のClaim 1は、先行技術には開示されていない構成要素を含み、その構成から予測される効果とは異なる、予期せぬ効果を奏するものであるため、進歩性を有する。\n\n---\n\n## 予備的主張：Claim 2以降の進歩性\n\n**仮に、Claim 1の進歩性が否定されたとしても**、Claim 2およびClaim 3の追加限定を先行技術に適用することは、先行技術からは動機付けがなく、容易想到ではない。\n\n### Claim 2の追加限定について\n\n本願発明のClaim 2は、「前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと」および「当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと」を限定している。\n\n先行技術は、変換スキップモードが適用されるか否かを示す構文要素を「判定することに基づく」ビットストリームに条件付きで含めると記載している（先行技術Claim 1）。しかし、先行技術には、「**最後の非ゼロ係数の位置**」と「**第１の条件**」という特定の要素の組み合わせに基づいて、構文要素がビットストリームに含まれることを決定するという具体的な構成はない。\n\n先行技術の当業者が、本願発明のClaim 1の構成（最後の非ゼロ係数の位置に基づく決定）を前提とした上で、さらに「第１の条件」を導入し、その条件を満たす場合にのみ構文要素を含める、という構成を想到する動機付けは、先行技術の開示からは見出せない。また、そのように限定した結果として、変換情報を使用して転換を実行するという、本願発明の解決効果を達成できると容易に推測できるものでもない。\n\n### Claim 3の追加限定について\n\n本願発明のClaim 3は、「前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと」を限定している。\n\n先行技術は、「変換スキップモードにおいて、変換が予測残差に対してスキップされる」と記載している（先行技術Claim 1）。これは、変換スキップモードが有効な場合には、変換を行わないことを示唆している。\n\n本願発明のClaim 3は、構文要素に従って「二次変換」を「脱量子化された残差係数値の結果」に適用するという、より具体的な変換内容を規定している。先行技術が「変換スキップモード」において変換を「スキップ」する（行わない）可能性を示唆しているのに対し、本願発明は、構文要素が存在する場合に「二次変換」を「適用する」ことを明確に規定している。\n\n先行技術の当業者が、本願発明のClaim 1およびClaim 2の構成（最後の非ゼロ係数の位置、第１の条件に基づく決定）を前提とした上で、さらに「二次変換」を「脱量子化された残差係数値の結果」に適用するという具体的な変換内容を想到することは、先行技術の開示から直接導き出されるものではない。先行技術は、変換スキップモードの適用可否を決定することに主眼があり、具体的な変換内容の適用方法については、本願発明ほど詳細に規定していない。\n\nしたがって、Claim 2およびClaim 3の追加限定は、先行技術の開示からは容易に想到できない構成であり、進歩性を有する。"
        },
        {
            "step": "2",
            "role": "審査官",
            "content": "## 特許審査官による進歩性審査：Claim 1（幹）の検証\n\n### 【第1段階：Claim 1 (幹) の検証】\n\n#### 1. 技術分野の関連性と動機付け（最重要）:\n\n*   **本願発明(A)と先行技術(B)の技術分野の関連性:**\n    本願発明は「ビデオデータをコーディングする方法」、先行技術も「映像データ（ビデオデータに相当）の係数符号化の効率改善」を課題としており、**両者ともにデジタルビデオ信号の圧縮・符号化技術という、高度に関連する技術分野**に属する。具体的には、ビデオコーディングにおけるブロック単位の処理、変換、係数処理、ビットストリームへの格納といった要素技術において共通性が見られる。\n\n*   **当業者が、Aの技術課題を解決するために、Bの技術を適用または改良しようとする動機付け:**\n    本願発明の課題は、「ビデオデータをコーディングする際、現在のビデオブロックの転換中に、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを効率的に決定すること」である。\n    一方、先行技術Bは、「変換スキップモードにおける係数符号化の効率を改善すること」を目的とし、「変換スキップモードが適用されるか否かを示す構文要素をビットストリームに条件付きで含める」ことを開示している。\n    当業者は、ビデオコーディングにおける効率改善という共通の目的を持つ技術分野において、先行技術Bが「変換スキップモード」の適用可否を決定するために構文要素を用いる手法を開示していることを知っている。\n    本願発明Aが対象とする「二次変換のための変換情報」の有無を決定するという課題は、先行技術Bの「変換スキップモード」の適用可否を決定する課題と、**「ある特定の情報（変換情報／変換スキップモード）をビットストリームに含めるか否かの決定」**という点で類似している。\n    したがって、当業者は、**先行技術Bにおける「構文要素を用いた決定手法」の考え方を応用し、本願発明Aの「二次変換のための変換情報」の有無を決定する課題に適用することを検討する動機付けが存在する**と言える。具体的には、先行技術Bが「判定することに基づいて」構文要素を決定していることから、本願発明Aにおいても、何らかの「判定」や「チェック」に基づいて「二次変換のための変換情報」に関する構文要素の有無を決定することを試みる可能性がある。\n\n*   **結論:**\n    両者は関連技術分野に属し、当業者は、**先行技術Bにおける構文要素を用いた情報伝達・制御の仕組みを、本願発明Aの「二次変換のための変換情報」の有無を決定する課題に適用しようとする動機付けが存在する**と判断される。\n\n#### 2. 構成要件の比較と容易性:\n\n*   **AとBの差分:**\n    本願発明Claim 1は、以下の構成要件を要求している。\n    1.  「現在のビデオブロックの**最後の非ゼロ係数の位置**をチェックすること」\n    2.  「前記位置は、前記現在のビデオブロックの**左上位置に対して相対的**であること」\n    3.  「前記位置に基づいて、**二次変換のための変換情報**を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること」\n\n    一方、先行技術Claim 1は、以下の構成要件を要求している。\n    a. 「差分コーディングモードが前記第１の映像ブロックに対して有効であるか無効であるかを判定すること」\n    b. 「前記差分コーディングモードにおいて、前記第１の映像ブロックのイントラ予測モードで導出される量子化残差と前記量子化残差の予測との差が前記ビットストリームに含まれている、こと」\n    c. 「前記判定することに基づいて前記変換を行うこと」\n    d. 「変換スキップモードが前記第１の映像ブロックに適用されるかどうかを示す第１の構文要素が、前記判定することに基づく前記ビットストリームに条件付きで含まれていること」\n    e. 「前記変換スキップモードにおいて、変換が予測残差に対してスキップされること」\n\n    主な差分は以下の通りである。\n    *   **決定の基準:** Aは「最後の非ゼロ係数の位置」を基準とする。Bは「差分コーディングモードの有効性判定（量子化残差と予測との差）」を基準とする。\n    *   **決定対象:** Aは「二次変換のための変換情報」の有無を決定する。Bは「変換スキップモード」の適用可否を示す構文要素の有無を決定する。\n    *   **位置の特定方法:** Aは「左上位置に対する相対的な位置」を明示する。Bには、このような具体的な位置特定方法の記載はない。\n\n*   **差分の容易性:**\n    当業者は、ビデオコーディングにおいて、ブロック内の係数情報を利用して何らかの決定を行うことは周知である。例えば、係数の非ゼロ数や、高周波係数に非ゼロ係数が存在するか否か、といった情報は、ブロックの複雑度や符号化効率を判断するために利用されうる。\n    しかし、**「最後の非ゼロ係数の位置」という、ブロックの空間的な末尾に近い係数に注目し、それを「二次変換」の適用可否という、より高度な変換処理に関する情報の決定に結びつけることは、先行技術Bからは直接示唆されていない。**\n    先行技術Bが「差分コーディングモード」の有効性判定という、係数そのものの差分に着目しているのに対し、本願発明Aは「最後の非ゼロ係数の位置」という、係数分布の**空間的な端**に着目している。この「最後の非ゼロ係数の位置」が、「二次変換」の適用可否を決定する直接的な指標となるという関係性は、技術常識から直ちに導かれるものではない。\n    また、「左上位置に対して相対的」という記載も、単なる座標系の定義に過ぎず、それ自体が容易に想到できる事項であるとは言えないが、重要なのは「最後の非ゼロ係数の位置」という基準である。\n\n    要するに、**「最後の非ゼロ係数の位置」という特定の情報に着目し、それを「二次変換」の適用可否の決定に結びつけるという構成は、先行技術Bの「差分コーディングモード」の有効性判定や「変換スキップモード」の適用可否決定とは、着目する情報（係数分布の端 vs 差分、ブロックサイズ等）も、決定対象（二次変換情報 vs 変換スキップモード）も異なり、先行技術Bや技術常識から容易に想到できるものではない。**\n\n#### 3. 効果の予測可能性:\n\n*   本願発明Aは、「最後の非ゼロ係数の位置」という情報に基づいて「二次変換のための変換情報」の有無を決定することにより、「効率的に決定すること」を目的としている。\n*   先行技術Bは、「差分コーディングモード」の有効性判定に基づいて「変換スキップモード」の適用可否を決定することにより、「係数符号化の効率を改善すること」を目的としている。\n*   本願発明Aの「最後の非ゼロ係数の位置」という基準が、**「二次変換」の適用有無の決定において、先行技術Bの基準（差分コーディングモードの有効性等）と比較して、どのような「格別な効果」をもたらすのかは、現時点では明確ではない。** 代理人の主張では「新たな効果（効率的な決定）」とされているが、その「効率性」が、先行技術Bの効率改善効果と比較して、あるいは単なる設計上の選択肢として、顕著なものであるとは断定できない。\n*   しかし、進歩性判断においては、構成要件の新規性・進歩性が認められれば、それによって奏される効果が予測可能か否かは、進歩性判断を否定する決定的な理由とはなりにくい。むしろ、**新規な構成から予期せぬ効果が生じている場合は、進歩性が肯定される方向に働く。** ここでは、構成要件の相違点に重きを置く。\n\n#### 4. 結論 (Claim 1):\n\nClaim 1は、先行技術Bとは異なる「最後の非ゼロ係数の位置」という基準に基づき、「二次変換のための変換情報」の有無を決定するという構成を有している。この「最後の非ゼロ係数の位置」という着眼点、およびそれを「二次変換」の適用可否決定に結びつける点は、先行技術Bの開示内容や、ビデオコーディングにおける一般的な技術常識から、当業者が容易に想到できるものではない。先行技術Bは「差分コーディングモード」や「変換スキップモード」に関するものであり、本願発明Aの「二次変換」に関する決定とは技術的アプローチが異なる。\nしたがって、Claim 1は**進歩性を有する（容易想到ではない）**と判断する。\n\n---\n\n（第1段階の結論「Claim 1は進歩性を有する（容易想到ではない）」に基づき、第2段階の審査は、厳密には不要となります。しかし、指示に従い、Claim 2以降の検証も形式的に行います。）\n\n### 【第2段階：Claim 2以降 (枝葉) の検証】\n\nClaim 1が容易想到ではないと判断されたため、Claim 2以降の追加限定の進歩性について、本来であれば詳細な検討は不要ですが、指示に従い、Claim 1の構成を前提とした上で、各限定について審査します。\n\n*   **Claim 2（枝1）の検討:**\n    Claim 2は、「前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含むこと」および「当該方法は、前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含むこと」を限定している。\n    *   **「第１の条件」の検討:** 「第１の条件」が具体的にどのようなものであるか不明であるが、一般的に、ビデオコーディングにおいては、ブロックサイズ、コーディングモード、符号化の複雑度など、様々な「コーディング基準」が存在し、それらを組み合わせて符号化の決定を行うことは技術常識である。もし「第１の条件」が、これらの周知のコーディング基準のうち、既存の技術で一般的に用いられるもの（例：特定のブロックサイズ以下である、特定のコーディングモードが選択されている等）であれば、それを「最後の非ゼロ係数の位置」という基準に加えて適用することは、**技術常識の範囲内**であり、容易想到となりうる。\n    *   **「変換情報を使用して前記転換を実行すること」の検討:** Claim 1の解決原理が「最後の非ゼロ係数の位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かの決定を実行すること」であり、その決定された情報（構文要素）を利用して「変換」を実行することは、その決定の**当然の帰結**であり、**格別な効果を生むとは言えない**。これは、先行技術Bにおける「判定することに基づいて変換を行う」「変換スキップモードが適用されるかどうかを示す構文要素が、判定に基づいてビットストリームに含まれている」という記載とも類似しており、技術常識の範囲内である。\n    *   **結論として、Claim 2の追加限定は、その「第１の条件」の内容次第ではあるが、一般的に、既存のコーディング基準の適用や、決定された情報に基づく転換の実行という点では、容易想到となりうる。** （ただし、Claim 1自体に進歩性があるため、Claim 2以降の独立した進歩性判断は、相対的な意義にとどまる。）\n\n*   **Claim 3（枝2）の検討:**\n    Claim 3は、「前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含むこと」を限定している。\n    *   本願発明の解決原理が「二次変換」に関する情報決定であり、Claim 1およびClaim 2において、その情報を用いて「転換」を行うことを示唆している。Claim 3は、その「転換」が具体的に「二次変換」であり、「脱量子化された残差係数値の結果」に適用されることを明示している。\n    *   ビデオコーディングにおいて、脱量子化された係数に対して逆変換（二次変換）を適用することは、一般的な処理である。また、本願発明が「二次変換」に関する情報決定を扱っている以上、その決定に従って「二次変換」を適用することは、**技術的な整合性**から見て当然であり、**容易に想到できる**。\n    *   **結論として、Claim 3の追加限定は、先行技術からは独立した進歩性を有するとは言えず、容易想到である。**\n\n（注：本来、Claim 1に進歩性が認められれば、それ以降の請求項（枝葉）についても、その追加限定が容易想到か否か、という観点で審査が進みます。Claim 1の構成要素が先行技術にない新規なものであり、かつ容易でない場合、それを前提としたClaim 2以降も、その追加限定が単なる技術常識や最適化の範囲を超えない限り、容易想到ではないと判断される傾向にあります。しかし、ここでは指示に従い、個別の追加限定についても容易性・格別効果の観点から審査しました。）"
        },
        {
            "step": "3",
            "role": "主任審査官",
            "content": "## 進歩性判断（主任審査官）\n\n### 1. Claim 1 (幹) の進歩性\n**判断:** 容易想到ではない\n**理由:** 本願発明Claim 1は、先行技術Bとは異なり、「現在のビデオブロックの最後の非ゼロ係数の位置」という具体的な係数分布情報に基づいて、「二次変換のための変換情報」の有無を決定する構成を採用している。先行技術Bは「差分コーディングモードの有効性判定」を基準としており、「最後の非ゼロ係数の位置」という情報と「二次変換」の適用可否との関連性は、先行技術Bやビデオコーディング分野の技術常識からは直接導き出されず、当業者が容易に想到できるものではない。したがって、構成上の顕著な相違があり、進歩性を有する。\n\n### 2. Claim 2 (枝1) の進歩性\n**判断:** 容易想到である\n**理由:** Claim 2の追加限定は、「第1の条件」を満足するコーディング基準の適用と、決定された変換情報を用いた転換の実行を規定している。ビデオコーディングにおける「第1の条件」が周知のコーディング基準（例：ブロックサイズ、モード等）であれば、それを既存の決定基準に加えて適用することは容易である。また、決定された情報を用いて後続の処理（転換）を実行することは、その決定の当然の帰結であり、格別な効果をもたらすものではない。したがって、Claim 1の構成にこれらの限定を加えることは、容易想到である。\n\n### 3. Claim 3 (枝2) の進歩性\n**判断:** 容易想到である\n**理由:** Claim 3は、転換として「二次変換」を「脱量子化された残差係数値の結果」に適用することを限定している。本願発明が「二次変換」に関する情報決定を扱っていることから、その決定に従って「二次変換」を適用することは、技術的な整合性から見て当然の処理であり、技術常識の範囲内である。したがって、Claim 1およびClaim 2の構成にこの限定を加えることは、容易想到である。\n\n### 4. 総合結論\n\nClaim 1は、先行技術Bの開示内容や技術常識からは容易に想到できない構成（最後の非ゼロ係数の位置に基づく二次変換情報の決定）を有しており、進歩性が認められる。\nしかしながら、Claim 2およびClaim 3の追加限定は、それ自体が技術常識の範囲内であるか、あるいはClaim 1の構成から当然導かれる処理・限定であるため、容易想到であると判断される。\nしたがって、Claim 1の構成、すなわち「最後の非ゼロ係数の位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かの決定を実行すること」が、先行技術と比較して顕著な特徴となり、進歩性が認められる。\n\n```json\n{\n  \"claim1\": {\n    \"inventive\": true,\n    \"reason\": \"本願発明Claim 1は、先行技術Bとは異なり、「現在のビデオブロックの最後の非ゼロ係数の位置」という具体的な係数分布情報に基づいて、「二次変換のための変換情報」の有無を決定する構成を採用している。先行技術Bは「差分コーディングモードの有効性判定」を基準としており、「最後の非ゼロ係数の位置」という情報と「二次変換」の適用可否との関連性は、先行技術Bやビデオコーディング分野の技術常識からは直接導き出されず、当業者が容易に想到できるものではない。したがって、構成上の顕著な相違があり、進歩性を有する。\"\n  },\n  \"claim2\": {\n    \"inventive\": false,\n    \"reason\": \"Claim 2の追加限定は、「第1の条件」を満足するコーディング基準の適用と、決定された変換情報を用いた転換の実行を規定している。「第1の条件」が周知のコーディング基準であれば、それを加えて適用することは容易であり、決定された情報を用いた転換の実行は、その決定の当然の帰結である。したがって、容易想到である。\"\n  },\n  \"claim3\": {\n    \"inventive\": false,\n    \"reason\": \"Claim 3は、転換として「二次変換」を「脱量子化された残差係数値の結果」に適用することを限定している。本願発明が「二次変換」に関する情報決定を扱っていることから、その決定に従って「二次変換」を適用することは、技術的な整合性から見て当然の処理であり、技術常識の範囲内である。したがって、容易想到である。\"\n  },\n  \"conclusion\": \"Claim 1は、先行技術Bの開示内容や技術常識からは容易に想到できない構成を有しており、進歩性が認められる。しかしながら、Claim 2およびClaim 3の追加限定は、それ自体が技術常識の範囲内であるか、あるいはClaim 1の構成から当然導かれる処理・限定であるため、容易想到であると判断される。したがって、Claim 1の構成は特許性を有する。\"\n}\n```"
        }
    ],
    "inventiveness": {
        "claim1": {
            "inventive": true,
            "reason": "本願発明Claim 1は、先行技術Bとは異なり、「現在のビデオブロックの最後の非ゼロ係数の位置」という具体的な係数分布情報に基づいて、「二次変換のための変換情報」の有無を決定する構成を採用している。先行技術Bは「差分コーディングモードの有効性判定」を基準としており、「最後の非ゼロ係数の位置」という情報と「二次変換」の適用可否との関連性は、先行技術Bやビデオコーディング分野の技術常識からは直接導き出されず、当業者が容易に想到できるものではない。したがって、構成上の顕著な相違があり、進歩性を有する。"
        },
        "claim2": {
            "inventive": false,
            "reason": "Claim 2の追加限定は、「第1の条件」を満足するコーディング基準の適用と、決定された変換情報を用いた転換の実行を規定している。「第1の条件」が周知のコーディング基準であれば、それを加えて適用することは容易であり、決定された情報を用いた転換の実行は、その決定の当然の帰結である。したがって、容易想到である。"
        },
        "claim3": {
            "inventive": false,
            "reason": "Claim 3は、転換として「二次変換」を「脱量子化された残差係数値の結果」に適用することを限定している。本願発明が「二次変換」に関する情報決定を扱っていることから、その決定に従って「二次変換」を適用することは、技術的な整合性から見て当然の処理であり、技術常識の範囲内である。したがって、容易想到である。"
        }
    },
    "prior_art_doc_number": "2023120212"
}