{
    "doc_number": "2023052340",
    "top_k": 2,
    "application_structure": {
        "problem": "ビデオデータのコーディング、特に現在のビデオブロックの転換（変換）処理における、従来技術の問題点を解決する。",
        "solution_principle": "現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを決定する。この決定に従って、二次変換を適用するかどうか、または適用する変換情報を判断する。",
        "claim1_requirements": [
            "ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
            "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。"
        ],
        "claim2_limitations": [
            "前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含む。",
            "前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含む。"
        ],
        "claim3_limitations": [
            "前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含む。"
        ],
        "claim4_limitations": [
            "前記変換情報は、分離不能な二次変換を示す。"
        ],
        "claim5_limitations": [
            "前記変換情報は、低周波分離不能変換を示す。"
        ],
        "claim6_limitations": [
            "前記構文要素が前記ビットストリームに含まれないときに、前記転換は、前記二次変換を使用しないで前記転換を実行することを含む。"
        ],
        "claim7_limitations": [
            "前記決定を実行することは、前記位置及び／又は第２の条件を満足しない少なくとも１つの他のコーディングの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含む。"
        ],
        "claim8_limitations": [
            "前記決定を実行することは、前記現在のビデオブロックのために使用されるコーディングモードが特定のタイプでないことの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含む。"
        ],
        "claim9_limitations": [
            "前記位置は、座標（ＬａｓｔＸ，ＬａｓｔＹ）によって表され、前記構文要素は、ＬａｓｔＸ≦Ｔｈ０及びＬａｓｔＹ≦Ｔｈ１であることの故に、前記ビットストリームに含まれることからスキップされ、ここで、Ｔｈ１及びＴｈ２は、数字である。"
        ],
        "claim10_limitations": [
            "Ｔｈ１及びＴｈ２は予め定義され、前記ビットストリームにおいて信号化されない。"
        ],
        "claim11_limitations": [
            "Ｔｈ１及びＴｈ２は等しい。"
        ],
        "claim12_limitations": [
            "Ｔｈ１＝Ｔｈ２＝０である。"
        ],
        "claim13_limitations": [
            "前記現在のビデオブロックの前記最後の非ゼロ係数の前記位置は、前記現在のビデオブロックの係数の順走査順序にある。"
        ],
        "claim14_limitations": [
            "前記変換は、順変換または逆変換のうちの少なくとも１つを含む。"
        ],
        "claim15_limitations": [
            "前記決定に従って前記ビットストリームから前記現在のビデオブロックを復号化することによって前記転換を実行することを更に含む。"
        ],
        "claim16_limitations": [
            "前記決定に従って前記現在のビデオブロックを前記ビットストリームに符号化することによって前記転換を実行することを更に含む。"
        ],
        "claim17_limitations": [
            "ビデオデータをコーディングするための装置であって、プロセッサと、命令をその上に有する非一時的なメモリとを含む。",
            "前記命令は、前記プロセッサによって実行されると、前記プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせ（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させる。"
        ],
        "claim18_limitations": [
            "命令を格納する非一時的なコンピュータ読取可能な記憶媒体。",
            "前記命令は、プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせ（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させる。"
        ],
        "claim19_limitations": [
            "ビデオ処理装置によって実行される方法によって生成されるビットストリームを格納する非一時的なコンピュータ読取可能な記録媒体。",
            "前記方法は、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）と、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行することと、を含む。"
        ]
    },
    "prior_art_structure": {
        "problem": "イントラブロックコピー（IBC）モードとインター予測ツールとの間の相互作用に関し、ビデオ処理における特定のコーディングモードとの関係。",
        "solution_principle": "ビデオの現在ビデオブロックに対しIBCモードが適用されることを決定し、その際、現在ブロックを含むビデオ領域からの参照サンプルを使用し、さらにIBCモードがデュアルコード化ツリーを有するビデオブロックに適用されること、そして、このIBCモードが適用される場合に特定のコーディングモードをディセーブルする（またはそのフラグをビットストリームに含めない）ことを特徴とする。",
        "claim1_requirements": [
            "ビデオの現在ビデオブロックに対してイントラブロックコピー（IBC）モードが適用されることを決定するステップであり、前記IBCモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用される、ステップ",
            "前記決定に基づいて、前記現在ビデオブロックと前記ビデオのビットストリームとの間の変換を実行するステップ",
            "前記IBCモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される"
        ],
        "claim2_limitations": [
            "前記方法は、さらに、前記現在ビデオブロックについて特定の符号化モードをディセーブルすることに関する決定を行うステップ、を含む"
        ],
        "claim3_limitations": [
            "前記特定の符号化モードのフラグが、前記現在ビデオブロックで使用されている前記IBCモードに応答して前記ビットストリームに含まれていない"
        ],
        "claim4_limitations": [
            "前記フラグが前記ビットストリームに含まれない場合、前記フラグはゼロであると推定される"
        ],
        "claim5_limitations": [
            "前記特定の符号化モードは、CUレベルの重み付けモードを用いる双予測を含み、前記CUレベルの重み付けモードを用いる双予測において、異なる重み付け値は、予測の導出プロセスにおける異なる参照画像に関連する"
        ],
        "claim6_limitations": [
            "CUレベルの重み付けモードを用いる前記双予測の重み付けインデックスが、前記現在ビデオブロックで使用されている前記IBCモードに応答して前記ビットストリームに含まれていない"
        ],
        "claim7_limitations": [
            "前記重み付けインデックスが前記ビットストリームに含まれない場合、重み付けインデックスはゼロであると推定される"
        ],
        "claim8_limitations": [
            "前記特定の符号化モードは、動きベクトル差異（MMVD）モードとのマージを含み、前記MMVDモードにおいて、ビデオブロックの動きベクトルは、マージ動き候補リストに基づいて導出され、かつ、少なくとも１つの動きベクトルオフセットによってさらに精密化される"
        ],
        "claim9_limitations": [
            "前記特定の符号化モードは、アフィンモード、および、結合されたインター－イントラ予測モードを含み、前記アフィンモードは、少なくとも１つの制御点動きベクトルを使用し、前記結合されたインター－イントラ予測モードにおいては、中間イントラ予測信号および中間インター予測信号の加重和に少なくとも基づいて最終予測が生成される"
        ],
        "claim10_limitations": [
            "前記特定の符号化モードは、サブブロックベースの時間的動きベクトル予測モードを含み、前記サブブロックベースの時間的動きベクトル予測モードにおいて、少なくとも１つの時間的な動きオフセットによって決定される配置領域に基づいて、動き情報が導出される"
        ],
        "claim11_limitations": [
            "前記実行するステップの前に、前記方法は、さらに、前記現在ビデオブロックについてブロックベクトルを導出するステップと、前記ブロックベクトルを精密化するために、前記ビットストリームに含まれる少なくとも１つのブロックベクトル差異を使用するステップと、を含む"
        ],
        "claim12_limitations": [
            "前記現在ビデオブロックの幅は２以上であり、かつ、高さは２以上である"
        ],
        "claim13_limitations": [
            "前記変換は、前記ビットストリームから前記現在ビデオブロックを復号化することを含む"
        ],
        "claim14_limitations": [
            "前記変換は、前記現在ビデオブロックを前記ビットストリームへと符号化することを含む"
        ],
        "claim15_requirements": [
            "プロセッサ、および、命令が保管された非一時メモリを備えるビデオデータを処理するための装置",
            "前記プロセッサによって、前記命令が実行されると、前記プロセッサに、 ビデオの現在ビデオブロックに対してイントラブロックコピー（ＩＢＣ）モードが適用されることを決定し、前記ＩＢＣモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用され、 前記決定に基づいて、前記現在ビデオブロックと前記ビデオのビットストリームとの間の変換を実行する、 ようにさせる",
            "前記ＩＢＣモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される"
        ],
        "claim16_requirements": [
            "命令を保管する非一時なコンピュータで読取り可能な記憶媒体",
            "前記命令が実行されると、プロセッサに、 ビデオの現在ビデオブロックに対してイントラブロックコピー（ＩＢＣ）モードが適用されることを決定し、前記ＩＢＣモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用され、 前記決定に基づいて、前記現在ビデオブロックと前記ビデオのビットストリームとの間の変換を実行する、 ようにさせ",
            "前記ＩＢＣモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される"
        ],
        "claim17_requirements": [
            "ビデオ処理装置によって実行される方法によって生成されたビデオのビットストリームを保管する非一時的なコンピュータで読取り可能な記憶媒体",
            "前記方法は、 ビデオの現在ビデオブロックに対してイントラブロックコピー（ＩＢＣ）モードが適用されることを決定するステップであり、前記ＩＢＣモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用される、ステップ",
            "前記決定に基づいて、前記現在ビデオブロックから前記ビットストリームを生成するステップ",
            "前記ＩＢＣモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される"
        ]
    },
    "applicant_arguments": "## 第一の主張：Claim 1の進歩性\n\n### 1. 課題・解決原理の相違点\n\n本願発明は、ビデオデータのコーディング、特に現在のビデオブロックの転換（変換）処理における従来技術の問題点を解決するため、現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを決定し、その決定に従って二次変換を適用するかどうか、または適用する変換情報を判断する。\n\n一方、先行技術は、イントラブロックコピー（IBC）モードとインター予測ツールとの間の相互作用に関し、ビデオ処理における特定のコーディングモードとの関係において、現在ビデオブロックに対しIBCモードが適用されることを決定し、その際、現在ブロックを含むビデオ領域からの参照サンプルを使用し、さらにIBCモードがデュアルコード化ツリーを有するビデオブロックに適用されること、そして、このIBCモードが適用される場合に特定のコーディングモードをディセーブルする（またはそのフラグをビットストリームに含めない）ことを特徴とする。\n\n両者の課題は、ビデオコーディングにおけるデータ処理の効率化という共通の目的を持つものの、本願発明が「最後の非ゼロ係数の位置」という係数情報に着目して二次変換の適用を判断するのに対し、先行技術は「IBCモードの適用」というコーディングモードの選択に着目して特定のモードをディセーブルすることに主眼を置いており、その技術的アプローチおよび解決しようとする具体的な課題において明確な相違がある。\n\n### 2. 構成要件の相違点\n\n本願発明のClaim 1は、以下の構成要件を含む。\n*   ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。\n*   前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。\n\n先行技術のClaim 1（要求事項）は、以下の構成要件を含む。\n*   ビデオの現在ビデオブロックに対してイントラブロックコピー（IBC）モードが適用されることを決定するステップであり、前記IBCモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用される、ステップ。\n*   前記決定に基づいて、前記現在ビデオブロックと前記ビデオのビットストリームとの間の変換を実行するステップ。\n*   前記IBCモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される。\n\n両者を比較すると、以下の相違点が明らかである。\n*   **着目点:** 本願発明は「最後の非ゼロ係数の位置」をチェックするのに対し、先行技術は「IBCモードの適用」を決定する。\n*   **判断基準:** 本願発明は、チェックした「位置」に基づいて「二次変換のための変換情報」の有無を判断するのに対し、先行技術は「IBCモードの適用」という決定に基づいて「変換を実行する」としている。\n*   **構文要素/フラグ:** 本願発明は「二次変換のための変換情報を識別する構文要素」の有無を判断するが、先行技術は特定のコーディングモード（IBCモード）の適用を決定し、それに関連するフラグ（例えば、特定の符号化モードをディセーブルするフラグ）の有無に言及している。\n\n### 3. 進歩性の根拠\n\n本願発明のClaim 1は、先行技術の開示内容からは容易に想到できない。\n\n先行技術は、IBCモードという特定のコーディングモードの適用可能性と、それに伴う他のコーディングモードのディセーブルに焦点を当てている。これは、ブロックのコーディングモードの選択肢を管理し、冗長性を削減するアプローチである。\n\n一方、本願発明は、ブロック内の係数情報（特に最後の非ゼロ係数の位置）という、より詳細なデータ構造に着目し、その情報に基づいて二次変換の適用判断を行うという、全く異なる技術的アプローチを採用している。これは、係数分布の局所的な特徴を利用して、より効率的な二次変換（例えば、分離不能な二次変換や低周波分離不能変換など、Claim 4, 5で示唆されるような）の適用を動的に制御しようとするものである。\n\n先行技術の開示からは、ビデオブロック内の係数の最終非ゼロ位置に着目し、その位置情報に基づいて二次変換の適用を判断するという発想は示唆されない。先行技術はIBCモードという、ブロック全体またはそれに準ずる単位でのモード選択の話であり、ブロック内部の係数分布の特定の位置情報まで踏み込んで、変換処理自体を制御するという発想は、先行技術からは導き出せない。\n\nしたがって、本願発明のClaim 1は、先行技術の課題解決の方向性や手段とは異なる、独自の技術的構成を有しており、その技術的効果（ビデオデータのコーディング、特に転換処理における従来技術の問題点の解決）は、先行技術からは予測できないものであり、進歩性を有すると主張する。\n\n---\n\n## 予備的主張：Claim 2以降の進歩性\n\n**仮に、Claim 1の進歩性が否定されたとしても**、Claim 2およびClaim 3の追加限定は、先行技術からは容易に想到できない。\n\n### Claim 2の追加限定について\n\nClaim 2は、Claim 1の決定が、「前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定すること」を含むことを限定している。さらに、「前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行する」ことを含む。\n\n先行技術は、IBCモードが適用される場合に特定のコーディングモードをディセーブルする（またはそのフラグをビットストリームに含めない）という開示にとどまる。これは、あくまでコーディングモードの選択肢の制約であり、係数の位置情報と「第１の条件」という具体的な基準に基づいて「二次変換のための変換情報」という構文要素の有無を判断し、その情報を用いて「転換を実行する」という本願発明の構成とは大きく異なる。\n\n先行技術からは、係数の最終非ゼロ位置と特定のコーディング基準を組み合わせた判断ロジック、および、それに基づいて二次変換の適用を制御するという発想は得られない。したがって、Claim 2の追加限定を、先行技術のIBCモードという文脈に適用して、係数の最終非ゼロ位置と何らかの条件に基づいて二次変換の適用を判断し、転換を実行することは、動機付けがなく容易ではない。\n\n### Claim 3の追加限定について\n\nClaim 3は、Claim 1の転換が、「前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含む」ことを限定している。\n\nこの「脱量子化された残差係数値の結果に適用する」という限定は、本願発明が係数情報に基づいた処理であることをさらに具体化するものである。\n\n先行技術は、IBCモードの適用、あるいは特定のコーディングモードのディセーブルといった、より上位のコーディングモード管理に終始しており、具体的に係数レベルでの二次変換処理の適用方法については開示していない。係数の最終非ゼロ位置のチェック、それに基づく二次変換情報（構文要素）の有無の判断、そしてその判断結果を基に、脱量子化された係数に二次変換を適用するという一連の処理は、先行技術の構成からは容易に想到できない。\n\nしたがって、Claim 3の限定を先行技術に適用して、IBCモードの決定とは別に、係数の最終非ゼロ位置に基づいて二次変換の適用を決定し、それを脱量子化された係数に適用することは、先行技術から導き出せるものではなく、容易想到ではない。",
    "examiner_review": "## 【第1段階：Claim 1 (幹) の検証】\n\n### 1. 技術分野の関連性と動機付け（最重要）:\n\n*   **本願発明(A)と先行技術(B)の技術分野の関連性:**\n    本願発明(A)は、ビデオデータのコーディング、特に現在のビデオブロックの転換（変換）処理における問題解決を課題としており、その解決手段として「最後の非ゼロ係数の位置」に基づく二次変換の適用判断を提案しています。\n    先行技術(B)は、イントラブロックコピー（IBC）モードとインター予測ツールとの相互作用、特定のコーディングモード（IBCモード）の適用とそれに伴う他のモードのディセーブルに焦点を当てています。\n    両者とも、ビデオコーディングにおけるブロック単位のデータ処理・変換に関する技術分野であり、**関連性があります**。具体的には、ビデオ圧縮におけるブロック処理、予測、変換といった共通の技術要素を含んでいます。\n\n*   **当業者によるAの課題解決のためのBの適用・改良の動機付け:**\n    先行技術(B)は、IBCモードという特定のコーディングモードの適用を決定し、それに伴って他のコーディングモードをディセーブルする、というアプローチを開示しています。この技術は、コーディングモードの選択肢を管理し、冗長性を削減することを目的としています。\n    一方、本願発明(A)は、ブロック内の係数情報、特に「最後の非ゼロ係数の位置」に着目し、その情報に基づいて二次変換の適用を判断するという、より詳細なデータ構造に基づいたアプローチをとっています。\n    先行技術(B)が、ブロックのコーディングモードの選択や管理に焦点を当てているのに対し、本願発明(A)は、ブロック内の係数情報に着目し、変換処理自体を動的に制御しようとしています。\n    当業者は、ビデオコーディングの効率化を目指す中で、先行技術(B)のようなコーディングモードの最適化手法を検討する際に、ブロック内の係数情報、特にその分布や特徴が変換処理の効率に影響を与える可能性を考慮するかもしれません。具体的には、係数情報が疎（sparse）になる傾向がある場合、あるいは係数の非ゼロ要素が特定の位置に偏る傾向がある場合、それに応じて変換処理を最適化できないか、と考える可能性があります。\n    先行技術(B)で言及されている「デュアルコード化ツリーを有するビデオブロック」のような特定のブロック構造において、係数の分布が特徴的になる可能性も考えられます。\n    したがって、当業者が、先行技術(B)で示されるようなブロック処理の効率化を図る中で、ブロック内の係数情報（特にその最終非ゼロ係数の位置）に着目し、それに基づいて二次変換の適用を制御するという発想に至る**動機付けは存在すると考えられます**。例えば、係数の最終非ゼロ位置が特定の値（例えば、ブロックの左上付近）にある場合に、二次変換が不要または適用効果が低いと判断し、計算コストを削減できるのではないか、といった考案です。\n\n### 2. 構成要件の比較と容易性:\n\n*   **AとBの差分:**\n    *   **着目点:** 本願発明(A)は「現在のビデオブロックの**最後の非ゼロ係数の位置**」をチェックする点。先行技術(B)は「**IBCモードの適用**」を決定する点。\n    *   **判断基準:** 本願発明(A)は、チェックした「位置」に基づいて「二次変換のための変換情報」の有無を決定する点。先行技術(B)は、「IBCモードの適用」という決定に基づいて「変換を実行する」としている点。\n    *   **判断対象:** 本願発明(A)は、「二次変換のための変換情報を識別する構文要素」の有無を判断する。先行技術(B)は、IBCモード適用時の「特定のコーディングモードをディセーブルするフラグ」の有無に言及している。\n\n*   **差分の容易性:**\n    先行技術(B)は、IBCモードの適用可否という、ブロックレベルのコーディングモードの決定に主眼を置いています。一方、本願発明(A)は、ブロック内の係数データという、より詳細な情報に注目し、その「最後の非ゼロ係数の位置」という具体的な情報に基づいて、二次変換の適用を制御しようとしています。\n    ビデオコーディングにおいて、ブロック内の係数（特に変換係数）の分布は、データの疎性やエネルギー集中度を示す重要な情報です。係数の最終非ゼロ位置を特定することは、係数データがどのように分布しているかの指標となり得ます。例えば、係数がブロックの左上付近に集中している（すなわち、最終非ゼロ係数の位置が左上付近である）場合、高周波成分が少ない、あるいはエネルギーが低周波成分に集中していることを示唆する可能性があります。\n    当業者は、このような係数分布の特徴と、変換処理（二次変換）の効率や効果との関係を理解している可能性があります。もし、係数が左上付近に集中している場合に二次変換を適用しても効果が薄い、あるいは計算コストに見合わないと判断できるのであれば、その情報（最後の非ゼロ係数の位置）に基づいて二次変換を適用しない、または適用する変換の種類を判断するという構成を考案することは、**通常の創作能力の範囲内**であると考えられます。\n    例えば、係数の走査順序（Claim 13で「順走査順序」が示唆されている）を考慮すれば、最後の非ゼロ係数の位置を特定することは比較的容易な操作です。そして、その位置がブロックの左上端に近いほど、信号の平坦性や低周波成分の優位性を示すと推測することは、技術常識の範囲内と言えます。そのような状況で、二次変換（特に高度な変換）の適用をスキップまたは最適化するという判断は、計算リソースの節約やビットレートの削減につながる効果が期待できるため、当業者が採用する可能性のある設計変更の一つと考えられます。\n\n### 3. 効果の予測可能性:\n\n*   **Aの効果の予測可能性:**\n    本願発明(A)が、最後の非ゼロ係数の位置に基づいて二次変換の適用を判断することで、係数分布が特定（例：左上付近に集中）されている場合には二次変換を適用しない、あるいは適用する変換情報を制限するといった制御が可能になります。これにより、計算コストの削減や、場合によってはビットレートの最適化（不要な変換処理のスキップ）といった効果が期待できます。\n    これらの効果は、係数分布と変換処理の関連性、および計算コストやビットレートへの影響といった、ビデオコーディングにおける**予測可能な範囲内**の効果であると考えられます。例えば、係数がほとんどゼロに近いブロックに対して冗長な変換処理を行う必要はない、という判断は、技術常識から導き出せるものです。\n    先行技術(B)は、IBCモードと他のモードとの関係で特定のモードをディセーブルすることによる効率化を示唆していますが、これも同様に、モード選択の最適化による予測可能な範囲の効果です。\n    本願発明(A)の「二次変換の適用判断」という効果は、先行技術(B)の「特定モードのディセーブル」という効果とは対象が異なりますが、いずれも「ビデオコーディングの効率化」という目的における、**程度の差**と捉えることができます。\n\n### 4. 結論 (Claim 1):\n\n上記1〜3の検討の結果、以下の理由により、Claim 1は**容易想到である**と判断します。\n\n*   **技術分野の関連性:** 本願発明と先行技術は、ビデオブロックのコーディング・変換処理という関連技術分野に属します。\n*   **動機付け:** 先行技術(B)が、コーディングモードの選択と効率化に焦点を当てているのに対し、当業者は、ブロック内の係数情報（特にその分布）が変換処理の効率に影響を与える可能性を認識しており、係数の最終非ゼロ位置に着目して二次変換の適用を制御するという発想に至る動機付けがあります。\n*   **構成要件の差分と容易性:** 先行技術(B)の課題解決の方向性から、当業者は、係数が左上付近に集中している（最終非ゼロ係数の位置が左上付近である）場合に、二次変換の効果が薄いと推測し、その適用をスキップまたは最適化するという判断を、通常の創作能力の範囲で容易に行うことが可能です。これは、係数分布の局所的な特徴と計算コスト削減の観点からの、一般的な最適化設計変更とみなせます。\n*   **効果の予測可能性:** 本願発明によって得られる効果（計算コスト削減、ビットレート最適化）は、係数分布の偏りと変換処理の関連性から予測可能な範囲内の効果です。\n\nしたがって、Claim 1は、先行技術(B)および技術常識に照らして、容易に想到することができると判断します。\n\n---\n\n## 【第2段階：Claim 2以降 (枝葉) の検証】\n\n### Claim 2（枝1）の検討:\n\n*   **追加限定の内容:**\n    Claim 2は、Claim 1の決定が、「前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定すること」を含み、さらに「前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行すること」を含むと限定しています。\n\n*   **容易性（技術常識か、格別な効果か）:**\n    Claim 2における「第１の条件」や「コーディング基準」という限定は、非常に一般的・抽象的です。当業者は、係数の最終非ゼロ位置といった情報に基づいて何らかの処理（二次変換の適用判断）を行う際に、その判断をさらに精緻化するために、ブロックのコーディングモード、QP値、ブロックサイズ、あるいは係数のスパースネスの度合いなど、様々な「コーディング基準」や「条件」を適用することを容易に想到できます。\n    また、「前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行する」という部分も、Claim 1で判断された結果に基づいて実際の転換処理を行う、という自然な流れであり、技術常識の範囲内です。\n    先行技術(B)においても、IBCモードの適用決定に基づいて特定のコーディングモードをディセーブルする、あるいはそのフラグをビットストリームに含めない、といった、判断結果に基づいたビットストリームへの反映（または非反映）を行っています。Claim 2の「構文要素をビットストリームに含める」という行為は、これと類似した、判断結果をビットストリームに信号化する、という一般的な手法です。\n    したがって、Claim 2の追加限定は、特定の「第１の条件」や「コーディング基準」の導入、および判断結果に基づく変換実行という点で、ビデオコーディングの分野における一般的な設計選択肢であり、**技術常識の範囲内**であると判断できます。これにより、Claim 1で示された効果を、より具体的・状況に応じたものにすることは可能ですが、**格別な効果が生じるとは言えません**。\n\n*   **結論（Claim 2）:**\n    Claim 2の追加限定は、本願発明の構成をより具体化するものではありますが、その内容は技術常識の範囲内であり、先行技術(B)や一般的なコーディング手法から容易に想到できるものです。したがって、Claim 2は**容易想到である**と判断します。\n\n### Claim 3（枝2）の検討:\n\n*   **追加限定の内容:**\n    Claim 3は、Claim 1の転換が、「前記構文要素に従った前記二次変換を前記現在のビデオブロックの**脱量子化された残差係数値の結果に適用すること**を含む」と限定しています。\n\n*   **容易性（技術常識か、格別な効果か）:**\n    ビデオコーディングにおいて、変換処理は通常、係数の量子化・脱量子化を経て行われます。したがって、二次変換を「脱量子化された残差係数値の結果に適用する」というのは、**ビデオコーディングにおける標準的な処理順序・方法**であり、技術常識そのものです。\n    本願発明(A)の解決原理は、「最後の非ゼロ係数の位置」に基づいて二次変換の適用を「判断する」ことにあります。その判断結果に基づいて、実際に係数に変換処理を適用する際には、当然、脱量子化された係数に対して行うのが一般的です。\n    先行技術(B)も、IBCモード適用に基づいて「変換を実行する」としており、その実行プロセスにおいて、係数処理が伴うことは当業者にとって自明です。\n    この限定は、本願発明の核心的な技術的特徴（最後の非ゼロ係数の位置に基づく判断）ではなく、その判断結果を適用する際の**一般的な実施方法**を記述しているに過ぎません。したがって、この限定により、先行技術から容易に想到できない、あるいは格別な効果が生じるとは言えません。\n\n*   **結論（Claim 3）:**\n    Claim 3の追加限定は、ビデオコーディングにおける標準的な処理手順を記述したものであり、技術常識の範囲内です。したがって、Claim 3は**容易想到である**と判断します。",
    "final_decision": "## 判断項目\n\n### 1. Claim 1 (幹) の進歩性\n**判断:** 容易想到である\n**理由:**\n先行技術(B)はIBCモード適用時の他モードディセーブルについて開示しており、ビデオコーディングの効率化という共通課題を持つ。当業者は、ブロック内の係数分布（特に最終非ゼロ係数の位置）が変換効率に影響するという技術常識に基づき、係数の最終非ゼロ位置に着目して二次変換の適用を制御するという発想に至る動機付けがある。係数の最終非ゼロ位置を特定し、それがブロック左上付近にある場合に二次変換の適用をスキップまたは最適化するという構成は、通常の創作能力の範囲で容易に想到可能であり、その効果も予測可能な範囲内である。\n\n### 2. Claim 2 (枝1) の進歩性\n**判断:** 容易想到である\n**理由:**\nClaim 2の「第１の条件」や「コーディング基準」は一般的・抽象的であり、当業者は容易に想到しうる。また、判断結果をビットストリームに信号化する（構文要素を含める）ことは、先行技術(B)におけるフラグの有無の開示とも類似し、一般的な手法である。これらの限定は、技術常識の範囲を超えず、格別な効果も生じない。\n\n### 3. Claim 3 (枝2) の進歩性\n**判断:** 容易想到である\n**理由:**\nClaim 3の「脱量子化された残差係数値の結果に適用する」ことは、ビデオコーディングにおける変換処理の標準的かつ一般的な実行方法であり、技術常識である。本願発明の核心的特徴ではなく、判断結果の一般的な適用手順を記述しているに過ぎない。\n\n### 4. 総合結論\nClaim 1、Claim 2、Claim 3のいずれのクレームについても、先行技術(B)および技術常識に照らして、容易に想到可能であると判断する。したがって、本願発明のClaim 1、Claim 2、Claim 3は、進歩性を有しない。\n\n---\n\n```json\n{\n  \"claim1\": {\n    \"inventive\": false,\n    \"reason\": \"先行技術(B)との関連分野における動機付けがあり、係数の最終非ゼロ位置に着目して二次変換の適用を制御する構成は、係数分布の特性と変換効率の関係という技術常識に基づき、通常の創作能力で容易に想到可能である。得られる効果も予測可能である。\"\n  },\n  \"claim2\": {\n    \"inventive\": false,\n    \"reason\": \"「第１の条件」や「コーディング基準」は一般的・抽象的であり、判断結果をビットストリームに信号化する手法も技術常識の範囲内である。先行技術(B)との比較においても、容易に想到できる構成・手法である。\"\n  },\n  \"claim3\": {\n    \"inventive\": false,\n    \"reason\": \"「脱量子化された残差係数値の結果に適用する」ことは、ビデオコーディングにおける変換処理の標準的かつ一般的な手順であり、技術常識である。本願発明の核心的特徴ではなく、容易に想到できる。\"\n  },\n  \"conclusion\": \"Claim 1、Claim 2、Claim 3いずれのクレームについても、先行技術(B)および技術常識に照らして、容易に想到可能であり、進歩性を有しないと判断する。\"\n}\n```",
    "conversation_history": [
        {
            "step": "0.1 Claim",
            "role": "構造化",
            "content": {
                "problem": "ビデオデータのコーディング、特に現在のビデオブロックの転換（変換）処理における、従来技術の問題点を解決する。",
                "solution_principle": "現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを決定する。この決定に従って、二次変換を適用するかどうか、または適用する変換情報を判断する。",
                "claim1_requirements": [
                    "ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。",
                    "前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。"
                ],
                "claim2_limitations": [
                    "前記決定を実行することは、前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定することを含む。",
                    "前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行することを更に含む。"
                ],
                "claim3_limitations": [
                    "前記転換は、前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含む。"
                ],
                "claim4_limitations": [
                    "前記変換情報は、分離不能な二次変換を示す。"
                ],
                "claim5_limitations": [
                    "前記変換情報は、低周波分離不能変換を示す。"
                ],
                "claim6_limitations": [
                    "前記構文要素が前記ビットストリームに含まれないときに、前記転換は、前記二次変換を使用しないで前記転換を実行することを含む。"
                ],
                "claim7_limitations": [
                    "前記決定を実行することは、前記位置及び／又は第２の条件を満足しない少なくとも１つの他のコーディングの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含む。"
                ],
                "claim8_limitations": [
                    "前記決定を実行することは、前記現在のビデオブロックのために使用されるコーディングモードが特定のタイプでないことの故に、前記構文要素が前記ビットストリームに含まれることからスキップされることを決定することを含む。"
                ],
                "claim9_limitations": [
                    "前記位置は、座標（ＬａｓｔＸ，ＬａｓｔＹ）によって表され、前記構文要素は、ＬａｓｔＸ≦Ｔｈ０及びＬａｓｔＹ≦Ｔｈ１であることの故に、前記ビットストリームに含まれることからスキップされ、ここで、Ｔｈ１及びＴｈ２は、数字である。"
                ],
                "claim10_limitations": [
                    "Ｔｈ１及びＴｈ２は予め定義され、前記ビットストリームにおいて信号化されない。"
                ],
                "claim11_limitations": [
                    "Ｔｈ１及びＴｈ２は等しい。"
                ],
                "claim12_limitations": [
                    "Ｔｈ１＝Ｔｈ２＝０である。"
                ],
                "claim13_limitations": [
                    "前記現在のビデオブロックの前記最後の非ゼロ係数の前記位置は、前記現在のビデオブロックの係数の順走査順序にある。"
                ],
                "claim14_limitations": [
                    "前記変換は、順変換または逆変換のうちの少なくとも１つを含む。"
                ],
                "claim15_limitations": [
                    "前記決定に従って前記ビットストリームから前記現在のビデオブロックを復号化することによって前記転換を実行することを更に含む。"
                ],
                "claim16_limitations": [
                    "前記決定に従って前記現在のビデオブロックを前記ビットストリームに符号化することによって前記転換を実行することを更に含む。"
                ],
                "claim17_limitations": [
                    "ビデオデータをコーディングするための装置であって、プロセッサと、命令をその上に有する非一時的なメモリとを含む。",
                    "前記命令は、前記プロセッサによって実行されると、前記プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせ（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させる。"
                ],
                "claim18_limitations": [
                    "命令を格納する非一時的なコンピュータ読取可能な記憶媒体。",
                    "前記命令は、プロセッサに、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックさせ（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行させる。"
                ],
                "claim19_limitations": [
                    "ビデオ処理装置によって実行される方法によって生成されるビットストリームを格納する非一時的なコンピュータ読取可能な記録媒体。",
                    "前記方法は、ビデオの現在のビデオブロックと前記ビデオのビットストリームとの間の転換中に、前記現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）と、前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行することと、を含む。"
                ]
            }
        },
        {
            "step": "0.2 Candidate Prior Art",
            "role": "構造化",
            "content": {
                "problem": "イントラブロックコピー（IBC）モードとインター予測ツールとの間の相互作用に関し、ビデオ処理における特定のコーディングモードとの関係。",
                "solution_principle": "ビデオの現在ビデオブロックに対しIBCモードが適用されることを決定し、その際、現在ブロックを含むビデオ領域からの参照サンプルを使用し、さらにIBCモードがデュアルコード化ツリーを有するビデオブロックに適用されること、そして、このIBCモードが適用される場合に特定のコーディングモードをディセーブルする（またはそのフラグをビットストリームに含めない）ことを特徴とする。",
                "claim1_requirements": [
                    "ビデオの現在ビデオブロックに対してイントラブロックコピー（IBC）モードが適用されることを決定するステップであり、前記IBCモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用される、ステップ",
                    "前記決定に基づいて、前記現在ビデオブロックと前記ビデオのビットストリームとの間の変換を実行するステップ",
                    "前記IBCモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される"
                ],
                "claim2_limitations": [
                    "前記方法は、さらに、前記現在ビデオブロックについて特定の符号化モードをディセーブルすることに関する決定を行うステップ、を含む"
                ],
                "claim3_limitations": [
                    "前記特定の符号化モードのフラグが、前記現在ビデオブロックで使用されている前記IBCモードに応答して前記ビットストリームに含まれていない"
                ],
                "claim4_limitations": [
                    "前記フラグが前記ビットストリームに含まれない場合、前記フラグはゼロであると推定される"
                ],
                "claim5_limitations": [
                    "前記特定の符号化モードは、CUレベルの重み付けモードを用いる双予測を含み、前記CUレベルの重み付けモードを用いる双予測において、異なる重み付け値は、予測の導出プロセスにおける異なる参照画像に関連する"
                ],
                "claim6_limitations": [
                    "CUレベルの重み付けモードを用いる前記双予測の重み付けインデックスが、前記現在ビデオブロックで使用されている前記IBCモードに応答して前記ビットストリームに含まれていない"
                ],
                "claim7_limitations": [
                    "前記重み付けインデックスが前記ビットストリームに含まれない場合、重み付けインデックスはゼロであると推定される"
                ],
                "claim8_limitations": [
                    "前記特定の符号化モードは、動きベクトル差異（MMVD）モードとのマージを含み、前記MMVDモードにおいて、ビデオブロックの動きベクトルは、マージ動き候補リストに基づいて導出され、かつ、少なくとも１つの動きベクトルオフセットによってさらに精密化される"
                ],
                "claim9_limitations": [
                    "前記特定の符号化モードは、アフィンモード、および、結合されたインター－イントラ予測モードを含み、前記アフィンモードは、少なくとも１つの制御点動きベクトルを使用し、前記結合されたインター－イントラ予測モードにおいては、中間イントラ予測信号および中間インター予測信号の加重和に少なくとも基づいて最終予測が生成される"
                ],
                "claim10_limitations": [
                    "前記特定の符号化モードは、サブブロックベースの時間的動きベクトル予測モードを含み、前記サブブロックベースの時間的動きベクトル予測モードにおいて、少なくとも１つの時間的な動きオフセットによって決定される配置領域に基づいて、動き情報が導出される"
                ],
                "claim11_limitations": [
                    "前記実行するステップの前に、前記方法は、さらに、前記現在ビデオブロックについてブロックベクトルを導出するステップと、前記ブロックベクトルを精密化するために、前記ビットストリームに含まれる少なくとも１つのブロックベクトル差異を使用するステップと、を含む"
                ],
                "claim12_limitations": [
                    "前記現在ビデオブロックの幅は２以上であり、かつ、高さは２以上である"
                ],
                "claim13_limitations": [
                    "前記変換は、前記ビットストリームから前記現在ビデオブロックを復号化することを含む"
                ],
                "claim14_limitations": [
                    "前記変換は、前記現在ビデオブロックを前記ビットストリームへと符号化することを含む"
                ],
                "claim15_requirements": [
                    "プロセッサ、および、命令が保管された非一時メモリを備えるビデオデータを処理するための装置",
                    "前記プロセッサによって、前記命令が実行されると、前記プロセッサに、 ビデオの現在ビデオブロックに対してイントラブロックコピー（ＩＢＣ）モードが適用されることを決定し、前記ＩＢＣモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用され、 前記決定に基づいて、前記現在ビデオブロックと前記ビデオのビットストリームとの間の変換を実行する、 ようにさせる",
                    "前記ＩＢＣモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される"
                ],
                "claim16_requirements": [
                    "命令を保管する非一時なコンピュータで読取り可能な記憶媒体",
                    "前記命令が実行されると、プロセッサに、 ビデオの現在ビデオブロックに対してイントラブロックコピー（ＩＢＣ）モードが適用されることを決定し、前記ＩＢＣモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用され、 前記決定に基づいて、前記現在ビデオブロックと前記ビデオのビットストリームとの間の変換を実行する、 ようにさせ",
                    "前記ＩＢＣモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される"
                ],
                "claim17_requirements": [
                    "ビデオ処理装置によって実行される方法によって生成されたビデオのビットストリームを保管する非一時的なコンピュータで読取り可能な記憶媒体",
                    "前記方法は、 ビデオの現在ビデオブロックに対してイントラブロックコピー（ＩＢＣ）モードが適用されることを決定するステップであり、前記ＩＢＣモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用される、ステップ",
                    "前記決定に基づいて、前記現在ビデオブロックから前記ビットストリームを生成するステップ",
                    "前記ＩＢＣモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される"
                ]
            }
        },
        {
            "step": "1",
            "role": "代理人",
            "content": "## 第一の主張：Claim 1の進歩性\n\n### 1. 課題・解決原理の相違点\n\n本願発明は、ビデオデータのコーディング、特に現在のビデオブロックの転換（変換）処理における従来技術の問題点を解決するため、現在のビデオブロックの最後の非ゼロ係数の位置をチェックし、その位置に基づいて、二次変換のための変換情報を識別する構文要素がビットストリームに含まれるか否かを決定し、その決定に従って二次変換を適用するかどうか、または適用する変換情報を判断する。\n\n一方、先行技術は、イントラブロックコピー（IBC）モードとインター予測ツールとの間の相互作用に関し、ビデオ処理における特定のコーディングモードとの関係において、現在ビデオブロックに対しIBCモードが適用されることを決定し、その際、現在ブロックを含むビデオ領域からの参照サンプルを使用し、さらにIBCモードがデュアルコード化ツリーを有するビデオブロックに適用されること、そして、このIBCモードが適用される場合に特定のコーディングモードをディセーブルする（またはそのフラグをビットストリームに含めない）ことを特徴とする。\n\n両者の課題は、ビデオコーディングにおけるデータ処理の効率化という共通の目的を持つものの、本願発明が「最後の非ゼロ係数の位置」という係数情報に着目して二次変換の適用を判断するのに対し、先行技術は「IBCモードの適用」というコーディングモードの選択に着目して特定のモードをディセーブルすることに主眼を置いており、その技術的アプローチおよび解決しようとする具体的な課題において明確な相違がある。\n\n### 2. 構成要件の相違点\n\n本願発明のClaim 1は、以下の構成要件を含む。\n*   ビデオの現在のビデオブロックとビデオのビットストリームとの間の転換中に、現在のビデオブロックの最後の非ゼロ係数の位置をチェックすること（前記位置は、前記現在のビデオブロックの左上位置に対して相対的である）。\n*   前記位置に基づいて、二次変換のための変換情報を識別する構文要素が前記ビットストリームに含まれるか否かの決定を実行すること。\n\n先行技術のClaim 1（要求事項）は、以下の構成要件を含む。\n*   ビデオの現在ビデオブロックに対してイントラブロックコピー（IBC）モードが適用されることを決定するステップであり、前記IBCモードにおいては、前記現在ビデオブロックを含むビデオ領域からの参照サンプルが使用される、ステップ。\n*   前記決定に基づいて、前記現在ビデオブロックと前記ビデオのビットストリームとの間の変換を実行するステップ。\n*   前記IBCモードは、ルマ成分およびクロマ成分が別々のコーディング構造ツリーでコード化される、デュアルコード化ツリーを有するビデオブロックに適用される。\n\n両者を比較すると、以下の相違点が明らかである。\n*   **着目点:** 本願発明は「最後の非ゼロ係数の位置」をチェックするのに対し、先行技術は「IBCモードの適用」を決定する。\n*   **判断基準:** 本願発明は、チェックした「位置」に基づいて「二次変換のための変換情報」の有無を判断するのに対し、先行技術は「IBCモードの適用」という決定に基づいて「変換を実行する」としている。\n*   **構文要素/フラグ:** 本願発明は「二次変換のための変換情報を識別する構文要素」の有無を判断するが、先行技術は特定のコーディングモード（IBCモード）の適用を決定し、それに関連するフラグ（例えば、特定の符号化モードをディセーブルするフラグ）の有無に言及している。\n\n### 3. 進歩性の根拠\n\n本願発明のClaim 1は、先行技術の開示内容からは容易に想到できない。\n\n先行技術は、IBCモードという特定のコーディングモードの適用可能性と、それに伴う他のコーディングモードのディセーブルに焦点を当てている。これは、ブロックのコーディングモードの選択肢を管理し、冗長性を削減するアプローチである。\n\n一方、本願発明は、ブロック内の係数情報（特に最後の非ゼロ係数の位置）という、より詳細なデータ構造に着目し、その情報に基づいて二次変換の適用判断を行うという、全く異なる技術的アプローチを採用している。これは、係数分布の局所的な特徴を利用して、より効率的な二次変換（例えば、分離不能な二次変換や低周波分離不能変換など、Claim 4, 5で示唆されるような）の適用を動的に制御しようとするものである。\n\n先行技術の開示からは、ビデオブロック内の係数の最終非ゼロ位置に着目し、その位置情報に基づいて二次変換の適用を判断するという発想は示唆されない。先行技術はIBCモードという、ブロック全体またはそれに準ずる単位でのモード選択の話であり、ブロック内部の係数分布の特定の位置情報まで踏み込んで、変換処理自体を制御するという発想は、先行技術からは導き出せない。\n\nしたがって、本願発明のClaim 1は、先行技術の課題解決の方向性や手段とは異なる、独自の技術的構成を有しており、その技術的効果（ビデオデータのコーディング、特に転換処理における従来技術の問題点の解決）は、先行技術からは予測できないものであり、進歩性を有すると主張する。\n\n---\n\n## 予備的主張：Claim 2以降の進歩性\n\n**仮に、Claim 1の進歩性が否定されたとしても**、Claim 2およびClaim 3の追加限定は、先行技術からは容易に想到できない。\n\n### Claim 2の追加限定について\n\nClaim 2は、Claim 1の決定が、「前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定すること」を含むことを限定している。さらに、「前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行する」ことを含む。\n\n先行技術は、IBCモードが適用される場合に特定のコーディングモードをディセーブルする（またはそのフラグをビットストリームに含めない）という開示にとどまる。これは、あくまでコーディングモードの選択肢の制約であり、係数の位置情報と「第１の条件」という具体的な基準に基づいて「二次変換のための変換情報」という構文要素の有無を判断し、その情報を用いて「転換を実行する」という本願発明の構成とは大きく異なる。\n\n先行技術からは、係数の最終非ゼロ位置と特定のコーディング基準を組み合わせた判断ロジック、および、それに基づいて二次変換の適用を制御するという発想は得られない。したがって、Claim 2の追加限定を、先行技術のIBCモードという文脈に適用して、係数の最終非ゼロ位置と何らかの条件に基づいて二次変換の適用を判断し、転換を実行することは、動機付けがなく容易ではない。\n\n### Claim 3の追加限定について\n\nClaim 3は、Claim 1の転換が、「前記構文要素に従った前記二次変換を前記現在のビデオブロックの脱量子化された残差係数値の結果に適用することを含む」ことを限定している。\n\nこの「脱量子化された残差係数値の結果に適用する」という限定は、本願発明が係数情報に基づいた処理であることをさらに具体化するものである。\n\n先行技術は、IBCモードの適用、あるいは特定のコーディングモードのディセーブルといった、より上位のコーディングモード管理に終始しており、具体的に係数レベルでの二次変換処理の適用方法については開示していない。係数の最終非ゼロ位置のチェック、それに基づく二次変換情報（構文要素）の有無の判断、そしてその判断結果を基に、脱量子化された係数に二次変換を適用するという一連の処理は、先行技術の構成からは容易に想到できない。\n\nしたがって、Claim 3の限定を先行技術に適用して、IBCモードの決定とは別に、係数の最終非ゼロ位置に基づいて二次変換の適用を決定し、それを脱量子化された係数に適用することは、先行技術から導き出せるものではなく、容易想到ではない。"
        },
        {
            "step": "2",
            "role": "審査官",
            "content": "## 【第1段階：Claim 1 (幹) の検証】\n\n### 1. 技術分野の関連性と動機付け（最重要）:\n\n*   **本願発明(A)と先行技術(B)の技術分野の関連性:**\n    本願発明(A)は、ビデオデータのコーディング、特に現在のビデオブロックの転換（変換）処理における問題解決を課題としており、その解決手段として「最後の非ゼロ係数の位置」に基づく二次変換の適用判断を提案しています。\n    先行技術(B)は、イントラブロックコピー（IBC）モードとインター予測ツールとの相互作用、特定のコーディングモード（IBCモード）の適用とそれに伴う他のモードのディセーブルに焦点を当てています。\n    両者とも、ビデオコーディングにおけるブロック単位のデータ処理・変換に関する技術分野であり、**関連性があります**。具体的には、ビデオ圧縮におけるブロック処理、予測、変換といった共通の技術要素を含んでいます。\n\n*   **当業者によるAの課題解決のためのBの適用・改良の動機付け:**\n    先行技術(B)は、IBCモードという特定のコーディングモードの適用を決定し、それに伴って他のコーディングモードをディセーブルする、というアプローチを開示しています。この技術は、コーディングモードの選択肢を管理し、冗長性を削減することを目的としています。\n    一方、本願発明(A)は、ブロック内の係数情報、特に「最後の非ゼロ係数の位置」に着目し、その情報に基づいて二次変換の適用を判断するという、より詳細なデータ構造に基づいたアプローチをとっています。\n    先行技術(B)が、ブロックのコーディングモードの選択や管理に焦点を当てているのに対し、本願発明(A)は、ブロック内の係数情報に着目し、変換処理自体を動的に制御しようとしています。\n    当業者は、ビデオコーディングの効率化を目指す中で、先行技術(B)のようなコーディングモードの最適化手法を検討する際に、ブロック内の係数情報、特にその分布や特徴が変換処理の効率に影響を与える可能性を考慮するかもしれません。具体的には、係数情報が疎（sparse）になる傾向がある場合、あるいは係数の非ゼロ要素が特定の位置に偏る傾向がある場合、それに応じて変換処理を最適化できないか、と考える可能性があります。\n    先行技術(B)で言及されている「デュアルコード化ツリーを有するビデオブロック」のような特定のブロック構造において、係数の分布が特徴的になる可能性も考えられます。\n    したがって、当業者が、先行技術(B)で示されるようなブロック処理の効率化を図る中で、ブロック内の係数情報（特にその最終非ゼロ係数の位置）に着目し、それに基づいて二次変換の適用を制御するという発想に至る**動機付けは存在すると考えられます**。例えば、係数の最終非ゼロ位置が特定の値（例えば、ブロックの左上付近）にある場合に、二次変換が不要または適用効果が低いと判断し、計算コストを削減できるのではないか、といった考案です。\n\n### 2. 構成要件の比較と容易性:\n\n*   **AとBの差分:**\n    *   **着目点:** 本願発明(A)は「現在のビデオブロックの**最後の非ゼロ係数の位置**」をチェックする点。先行技術(B)は「**IBCモードの適用**」を決定する点。\n    *   **判断基準:** 本願発明(A)は、チェックした「位置」に基づいて「二次変換のための変換情報」の有無を決定する点。先行技術(B)は、「IBCモードの適用」という決定に基づいて「変換を実行する」としている点。\n    *   **判断対象:** 本願発明(A)は、「二次変換のための変換情報を識別する構文要素」の有無を判断する。先行技術(B)は、IBCモード適用時の「特定のコーディングモードをディセーブルするフラグ」の有無に言及している。\n\n*   **差分の容易性:**\n    先行技術(B)は、IBCモードの適用可否という、ブロックレベルのコーディングモードの決定に主眼を置いています。一方、本願発明(A)は、ブロック内の係数データという、より詳細な情報に注目し、その「最後の非ゼロ係数の位置」という具体的な情報に基づいて、二次変換の適用を制御しようとしています。\n    ビデオコーディングにおいて、ブロック内の係数（特に変換係数）の分布は、データの疎性やエネルギー集中度を示す重要な情報です。係数の最終非ゼロ位置を特定することは、係数データがどのように分布しているかの指標となり得ます。例えば、係数がブロックの左上付近に集中している（すなわち、最終非ゼロ係数の位置が左上付近である）場合、高周波成分が少ない、あるいはエネルギーが低周波成分に集中していることを示唆する可能性があります。\n    当業者は、このような係数分布の特徴と、変換処理（二次変換）の効率や効果との関係を理解している可能性があります。もし、係数が左上付近に集中している場合に二次変換を適用しても効果が薄い、あるいは計算コストに見合わないと判断できるのであれば、その情報（最後の非ゼロ係数の位置）に基づいて二次変換を適用しない、または適用する変換の種類を判断するという構成を考案することは、**通常の創作能力の範囲内**であると考えられます。\n    例えば、係数の走査順序（Claim 13で「順走査順序」が示唆されている）を考慮すれば、最後の非ゼロ係数の位置を特定することは比較的容易な操作です。そして、その位置がブロックの左上端に近いほど、信号の平坦性や低周波成分の優位性を示すと推測することは、技術常識の範囲内と言えます。そのような状況で、二次変換（特に高度な変換）の適用をスキップまたは最適化するという判断は、計算リソースの節約やビットレートの削減につながる効果が期待できるため、当業者が採用する可能性のある設計変更の一つと考えられます。\n\n### 3. 効果の予測可能性:\n\n*   **Aの効果の予測可能性:**\n    本願発明(A)が、最後の非ゼロ係数の位置に基づいて二次変換の適用を判断することで、係数分布が特定（例：左上付近に集中）されている場合には二次変換を適用しない、あるいは適用する変換情報を制限するといった制御が可能になります。これにより、計算コストの削減や、場合によってはビットレートの最適化（不要な変換処理のスキップ）といった効果が期待できます。\n    これらの効果は、係数分布と変換処理の関連性、および計算コストやビットレートへの影響といった、ビデオコーディングにおける**予測可能な範囲内**の効果であると考えられます。例えば、係数がほとんどゼロに近いブロックに対して冗長な変換処理を行う必要はない、という判断は、技術常識から導き出せるものです。\n    先行技術(B)は、IBCモードと他のモードとの関係で特定のモードをディセーブルすることによる効率化を示唆していますが、これも同様に、モード選択の最適化による予測可能な範囲の効果です。\n    本願発明(A)の「二次変換の適用判断」という効果は、先行技術(B)の「特定モードのディセーブル」という効果とは対象が異なりますが、いずれも「ビデオコーディングの効率化」という目的における、**程度の差**と捉えることができます。\n\n### 4. 結論 (Claim 1):\n\n上記1〜3の検討の結果、以下の理由により、Claim 1は**容易想到である**と判断します。\n\n*   **技術分野の関連性:** 本願発明と先行技術は、ビデオブロックのコーディング・変換処理という関連技術分野に属します。\n*   **動機付け:** 先行技術(B)が、コーディングモードの選択と効率化に焦点を当てているのに対し、当業者は、ブロック内の係数情報（特にその分布）が変換処理の効率に影響を与える可能性を認識しており、係数の最終非ゼロ位置に着目して二次変換の適用を制御するという発想に至る動機付けがあります。\n*   **構成要件の差分と容易性:** 先行技術(B)の課題解決の方向性から、当業者は、係数が左上付近に集中している（最終非ゼロ係数の位置が左上付近である）場合に、二次変換の効果が薄いと推測し、その適用をスキップまたは最適化するという判断を、通常の創作能力の範囲で容易に行うことが可能です。これは、係数分布の局所的な特徴と計算コスト削減の観点からの、一般的な最適化設計変更とみなせます。\n*   **効果の予測可能性:** 本願発明によって得られる効果（計算コスト削減、ビットレート最適化）は、係数分布の偏りと変換処理の関連性から予測可能な範囲内の効果です。\n\nしたがって、Claim 1は、先行技術(B)および技術常識に照らして、容易に想到することができると判断します。\n\n---\n\n## 【第2段階：Claim 2以降 (枝葉) の検証】\n\n### Claim 2（枝1）の検討:\n\n*   **追加限定の内容:**\n    Claim 2は、Claim 1の決定が、「前記位置及び第１の条件を満足する少なくとも１つのコーディング基準に起因して、前記構文要素が前記ビットストリームに含まれることを決定すること」を含み、さらに「前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行すること」を含むと限定しています。\n\n*   **容易性（技術常識か、格別な効果か）:**\n    Claim 2における「第１の条件」や「コーディング基準」という限定は、非常に一般的・抽象的です。当業者は、係数の最終非ゼロ位置といった情報に基づいて何らかの処理（二次変換の適用判断）を行う際に、その判断をさらに精緻化するために、ブロックのコーディングモード、QP値、ブロックサイズ、あるいは係数のスパースネスの度合いなど、様々な「コーディング基準」や「条件」を適用することを容易に想到できます。\n    また、「前記ビットストリーム中の前記構文要素によって識別される前記変換情報を使用して前記転換を実行する」という部分も、Claim 1で判断された結果に基づいて実際の転換処理を行う、という自然な流れであり、技術常識の範囲内です。\n    先行技術(B)においても、IBCモードの適用決定に基づいて特定のコーディングモードをディセーブルする、あるいはそのフラグをビットストリームに含めない、といった、判断結果に基づいたビットストリームへの反映（または非反映）を行っています。Claim 2の「構文要素をビットストリームに含める」という行為は、これと類似した、判断結果をビットストリームに信号化する、という一般的な手法です。\n    したがって、Claim 2の追加限定は、特定の「第１の条件」や「コーディング基準」の導入、および判断結果に基づく変換実行という点で、ビデオコーディングの分野における一般的な設計選択肢であり、**技術常識の範囲内**であると判断できます。これにより、Claim 1で示された効果を、より具体的・状況に応じたものにすることは可能ですが、**格別な効果が生じるとは言えません**。\n\n*   **結論（Claim 2）:**\n    Claim 2の追加限定は、本願発明の構成をより具体化するものではありますが、その内容は技術常識の範囲内であり、先行技術(B)や一般的なコーディング手法から容易に想到できるものです。したがって、Claim 2は**容易想到である**と判断します。\n\n### Claim 3（枝2）の検討:\n\n*   **追加限定の内容:**\n    Claim 3は、Claim 1の転換が、「前記構文要素に従った前記二次変換を前記現在のビデオブロックの**脱量子化された残差係数値の結果に適用すること**を含む」と限定しています。\n\n*   **容易性（技術常識か、格別な効果か）:**\n    ビデオコーディングにおいて、変換処理は通常、係数の量子化・脱量子化を経て行われます。したがって、二次変換を「脱量子化された残差係数値の結果に適用する」というのは、**ビデオコーディングにおける標準的な処理順序・方法**であり、技術常識そのものです。\n    本願発明(A)の解決原理は、「最後の非ゼロ係数の位置」に基づいて二次変換の適用を「判断する」ことにあります。その判断結果に基づいて、実際に係数に変換処理を適用する際には、当然、脱量子化された係数に対して行うのが一般的です。\n    先行技術(B)も、IBCモード適用に基づいて「変換を実行する」としており、その実行プロセスにおいて、係数処理が伴うことは当業者にとって自明です。\n    この限定は、本願発明の核心的な技術的特徴（最後の非ゼロ係数の位置に基づく判断）ではなく、その判断結果を適用する際の**一般的な実施方法**を記述しているに過ぎません。したがって、この限定により、先行技術から容易に想到できない、あるいは格別な効果が生じるとは言えません。\n\n*   **結論（Claim 3）:**\n    Claim 3の追加限定は、ビデオコーディングにおける標準的な処理手順を記述したものであり、技術常識の範囲内です。したがって、Claim 3は**容易想到である**と判断します。"
        },
        {
            "step": "3",
            "role": "主任審査官",
            "content": "## 判断項目\n\n### 1. Claim 1 (幹) の進歩性\n**判断:** 容易想到である\n**理由:**\n先行技術(B)はIBCモード適用時の他モードディセーブルについて開示しており、ビデオコーディングの効率化という共通課題を持つ。当業者は、ブロック内の係数分布（特に最終非ゼロ係数の位置）が変換効率に影響するという技術常識に基づき、係数の最終非ゼロ位置に着目して二次変換の適用を制御するという発想に至る動機付けがある。係数の最終非ゼロ位置を特定し、それがブロック左上付近にある場合に二次変換の適用をスキップまたは最適化するという構成は、通常の創作能力の範囲で容易に想到可能であり、その効果も予測可能な範囲内である。\n\n### 2. Claim 2 (枝1) の進歩性\n**判断:** 容易想到である\n**理由:**\nClaim 2の「第１の条件」や「コーディング基準」は一般的・抽象的であり、当業者は容易に想到しうる。また、判断結果をビットストリームに信号化する（構文要素を含める）ことは、先行技術(B)におけるフラグの有無の開示とも類似し、一般的な手法である。これらの限定は、技術常識の範囲を超えず、格別な効果も生じない。\n\n### 3. Claim 3 (枝2) の進歩性\n**判断:** 容易想到である\n**理由:**\nClaim 3の「脱量子化された残差係数値の結果に適用する」ことは、ビデオコーディングにおける変換処理の標準的かつ一般的な実行方法であり、技術常識である。本願発明の核心的特徴ではなく、判断結果の一般的な適用手順を記述しているに過ぎない。\n\n### 4. 総合結論\nClaim 1、Claim 2、Claim 3のいずれのクレームについても、先行技術(B)および技術常識に照らして、容易に想到可能であると判断する。したがって、本願発明のClaim 1、Claim 2、Claim 3は、進歩性を有しない。\n\n---\n\n```json\n{\n  \"claim1\": {\n    \"inventive\": false,\n    \"reason\": \"先行技術(B)との関連分野における動機付けがあり、係数の最終非ゼロ位置に着目して二次変換の適用を制御する構成は、係数分布の特性と変換効率の関係という技術常識に基づき、通常の創作能力で容易に想到可能である。得られる効果も予測可能である。\"\n  },\n  \"claim2\": {\n    \"inventive\": false,\n    \"reason\": \"「第１の条件」や「コーディング基準」は一般的・抽象的であり、判断結果をビットストリームに信号化する手法も技術常識の範囲内である。先行技術(B)との比較においても、容易に想到できる構成・手法である。\"\n  },\n  \"claim3\": {\n    \"inventive\": false,\n    \"reason\": \"「脱量子化された残差係数値の結果に適用する」ことは、ビデオコーディングにおける変換処理の標準的かつ一般的な手順であり、技術常識である。本願発明の核心的特徴ではなく、容易に想到できる。\"\n  },\n  \"conclusion\": \"Claim 1、Claim 2、Claim 3いずれのクレームについても、先行技術(B)および技術常識に照らして、容易に想到可能であり、進歩性を有しないと判断する。\"\n}\n```"
        }
    ],
    "inventiveness": {
        "claim1": {
            "inventive": false,
            "reason": "先行技術(B)との関連分野における動機付けがあり、係数の最終非ゼロ位置に着目して二次変換の適用を制御する構成は、係数分布の特性と変換効率の関係という技術常識に基づき、通常の創作能力で容易に想到可能である。得られる効果も予測可能である。"
        },
        "claim2": {
            "inventive": false,
            "reason": "「第１の条件」や「コーディング基準」は一般的・抽象的であり、判断結果をビットストリームに信号化する手法も技術常識の範囲内である。先行技術(B)との比較においても、容易に想到できる構成・手法である。"
        },
        "claim3": {
            "inventive": false,
            "reason": "「脱量子化された残差係数値の結果に適用する」ことは、ビデオコーディングにおける変換処理の標準的かつ一般的な手順であり、技術常識である。本願発明の核心的特徴ではなく、容易に想到できる。"
        }
    },
    "prior_art_doc_number": "2023052340"
}